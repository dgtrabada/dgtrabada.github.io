

<!DOCTYPE html>


<html lang="es" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Automatización de tareas y servicios &#8212; dgtrabada</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script src="../../_static/translations.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'so/GNULinux/06_automatizacion_tareas';</script>
    <link rel="shortcut icon" href="../../_static/ico.png"/>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="Comandos avanzados" href="07_comandos_avanzados.html" />
    <link rel="prev" title="Samba" href="05_samba.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="es"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Saltar al contenido principal</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">dgtrabada</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../historia/index.html">Historia</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../historia/Introduccion.html">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/mecanicos.html">Dispositivos mecánicos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/electricicidad.html">Transición, la electricicidad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/1gen.html">Primera generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/2gen.html">Segunda generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/3gen.html">Tercera generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/4gen.html">Cuarta generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/SXXI.html">SXXI</a></li>
</ul>
</li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Sistemas Operativos</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../teoria/medida_representacion_informacion.html">Medida y representación de la información</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistema_anal%C3%B3gico_digital.html">Sistema analógico &amp; digital</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/medida_informacion.html">Medida de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/representacion_informacion.html">Representación de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_numeracion.html">Sistemas de numeración</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/cambio_base_decimales.html">Cambio de base con decimales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_codificacion.html">Sistemas de codificación</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/imagen_digital.html">Imagen digital</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../fundamentos/index.html">Fundamentos de sistemas operativos</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/so_evolucion_sistema_operativo.html">Evolución del Sistema Operativo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/so_licencias.html">Tipos software y licencias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/sistemas_operativos.html">Sistemas operativos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_procesos.html">Gestión de procesos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_memoria.html">Gestión de memoria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/sistema_archivos.html">Sistema de archivos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_arranque.html">Gestión arranque</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../maquinas_virtuales.html">La virtualización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particiones.html">Particiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/raid.html">RAID</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">GNU/Linux</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00_historia.html">Historia GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="01_comandos_basicos.html">Comandos básicos GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_permisos.html">Permisos en GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_usuarios.html">Usuarios y grupos GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_ssh.html">SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_samba.html">Samba</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Automatización de tareas y servicios</a></li>
<li class="toctree-l3"><a class="reference internal" href="07_comandos_avanzados.html">Comandos avanzados</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_NIS.html">NIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="09_GNULinux_NFS.html">NFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="10_slurm.html">Slurm</a></li>
<li class="toctree-l3"><a class="reference internal" href="11_modules.html">Environment modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="12_ansible.html">Ansible</a></li>
<li class="toctree-l3"><a class="reference internal" href="13_ldap.html">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="14_rockylinux.html">Rocky Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="15_shell_scripting.html">Shell Scripting</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../windows/index.html">Windows</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../windows/01_historia.html">Historia de Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/02_configuracion.html">Configuración Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/03_usuarios_grupos.html">Usuarios y grupos Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/04_arranque.html">Arranque de Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/05_comandos_dos.html">Comandos ms-dos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/06_powershell.html">PowerShell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/07_AD_DS.html">Active Directory Domain Services (AD DS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/08_Caso_practico_AD.html">Casos prácticos : Active Directory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/09_Caso_practico_AD_sin_GUI.html">Casos prácticos : Active Directory sin GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/10_powershell_scripting.html">PowerShell Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/11_bat.html">Scripting .bat</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../hardware/index.html">Hardware</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../teoria/medida_representacion_informacion.html">Medida y representación de la información</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistema_anal%C3%B3gico_digital.html">Sistema analógico &amp; digital</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/medida_informacion.html">Medida de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/representacion_informacion.html">Representación de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_numeracion.html">Sistemas de numeración</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/cambio_base_decimales.html">Cambio de base con decimales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_codificacion.html">Sistemas de codificación</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/imagen_digital.html">Imagen digital</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/mantenimiento.html">Mantenimiento de sistemas informáticos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/bios.html">BIOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/uefi.html">UEFI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/diccionario.html">Diccionario de la BIOS/UEFI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/dispositivos_alamacenamiento.html">Dispositivos de almacenamiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particiones.html">Particiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/buses.html">Buses y conectores de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/raid.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/historia_microsprocesador.html">Breve historia del procesador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/microprocesadores.html">Microprocesadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/encapsuladors.html">Encapsulados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/ventilacion.html">Ventilación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/ram.html">Memoria RAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/puertas_logicas.html">Puertas lógicas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/arquitectura.html">Arquitectura del ordenador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conceptos_electronicos.html">Conceptos eléctricos - electrónicos y elementos básicos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/fuente_alimentacion.html">Fuentes de Alimentación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conectores_potencia.html">Cableado y conectores de potencia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/sai.html">Sistemas de alimentación interrumpida</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/carcasa.html">La carcasa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/placa_base.html">La placa base, el “chipset”, la EPROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conectores.html">Conectores y buses externos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/tarjetas.html">Tarjetas de expansión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/perifericos.html">Periféricos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/cpd.html">Centro de Proceso de Datos (CPD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/diagnostico.html">Herramientas de diagnostico</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../redes/index.html">Redes</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-9"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../redes/sistemas_comunicacion.html">Sistema de comunicación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/tipos_tecnicas_transmision_datos.html">Tipos y técnicas de transmisión de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/sistemas_red.html">Sistemas en red</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/medios_transmision.html">Medios de transmisión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/perturbaciones.html">Perturbaciones en la transmisión de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/topologia.html">Topologías de red y modos de conexión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/redes_inalambricas.html">Redes inalámbricas 802.11</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/anquitectura_niveles.html">Arquitecturas basadas en niveles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/transporte_datos_equipos_interconexion.html">Transporte de datos y equipos de interconexión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/Direccionamiento_IP.html">Direccionamiento IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/cableado_estructurado.html">Cableado Estructurado</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Descarga esta pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/so/GNULinux/06_automatizacion_tareas.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Descargar archivo fuente"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimir en PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Modo de pantalla completa"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="claro/oscuro" aria-label="claro/oscuro" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Automatización de tareas y servicios</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenido </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comando-at">Comando at</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crontab">Crontab</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#systemd">Systemd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit">[Unit]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service">[Service]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">[Install]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#los-targets">Los Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#systemctl">Systemctl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-servicios">GESTION DE SERVICIOS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-encadenamiento-de-servicios">Ejemplo de encadenamiento de servicios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-enrutamiento">Ejemplo de enrutamiento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#acceder-a-los-registros-del-sistema">Acceder a los registros del sistema</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="automatizacion-de-tareas-y-servicios">
<h1>Automatización de tareas y servicios<a class="headerlink" href="#automatizacion-de-tareas-y-servicios" title="Enlace permanente a este encabezado">#</a></h1>
<section id="comando-at">
<h2>Comando at<a class="headerlink" href="#comando-at" title="Enlace permanente a este encabezado">#</a></h2>
<p>Permite indicar el momento en que se quiere ejecutar un trabajo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>at <span class="o">[</span>opciones <span class="o">]</span> TIME
</pre></div>
</div>
<p>Al ejecutar at pasamos a un nuevo prompt, que nos permite introducir comandos que se ejecutarán a la hora indicada. Para guardar trabajo y salir: <strong>CTRL+D</strong> (guarda el entorno), el trabajo no para aunque se cierre la sesión.</p>
<p>Opciones:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-f FILE  <span class="c1"># indica un fichero donde se encuentran las acciones a realizar.</span>

HH:MM -&gt; <span class="m">12</span>:54
HH:MMAM/PM, -&gt; <span class="m">1</span>:35PM
HH:MM MMDDYY -&gt; <span class="m">1</span>:35PM <span class="m">122505</span>
now + num -&gt; at now+2hours
num puede ser minutos, horas, días, semanas, ...
today, tomorrow -&gt; <span class="m">22</span>:44tomorrow
</pre></div>
</div>
<p>Ver trabajos pendientes del usuario (o de todos si es root):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>at -l
</pre></div>
</div>
<p>Borrar trabajos</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>at -d numero
</pre></div>
</div>
<p>Control de acceso: /etc/at.allow, /etc/at.deny</p>
</section>
<section id="crontab">
<h2>Crontab<a class="headerlink" href="#crontab" title="Enlace permanente a este encabezado">#</a></h2>
<p>Cron se emplea para ejecución de trabajos periódicos, mientras que el comando crontab permite configurar los procesos a ejecutar que posteriormente el demonio cron se encarga de ejecutar, el contrab del sistema se encuentra en <strong>/etc/crontab</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>crontab -e    <span class="c1">#edita el fichero crontab</span>
crontab -l    <span class="c1">#muestra el fichero crontab</span>
crontab -r    <span class="c1">#borra el fichero crontab</span>
</pre></div>
</div>
<p>Control de acceso: /etc/cron.allow, /etc/cron.deny</p>
<p>Hay al menos dos maneras distintas de usar cron:</p>
<p>La primera es en el directorio etc, encontrarás los siguientes directorios:</p>
<ul class="simple">
<li><p>cron.hourly</p></li>
<li><p>cron.daily</p></li>
<li><p>cron.weekly</p></li>
<li><p>cron.monthly</p></li>
</ul>
<p>Si se coloca un archivo tipo script en cualquiera de estos directorios, entonces el script se ejecutará cada hora, cada día, cada semana o cada mes, dependiendo del directorio.</p>
<p>Como segundo modo de ejecutar o usar cron es a través de manipular directamente el archivo /etc/crontab. En la instalación por defecto de varias distribuciones Linux, este archivo se verá a algo como lo siguiente:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat /etc/crontab
<span class="nv">SHELL</span><span class="o">=</span>/bin/bash
<span class="nv">PATH</span><span class="o">=</span>/sbin:/bin:/usr/sbin:/usr/bin
<span class="nv">MAILTO</span><span class="o">=</span>root
<span class="nv">HOME</span><span class="o">=</span>/

<span class="c1"># run-parts</span>
<span class="m">01</span> * * * * root run-parts /etc/cron.hourly
<span class="m">02</span> <span class="m">4</span> * * * root run-parts /etc/cron.daily
<span class="m">22</span> <span class="m">4</span> * * <span class="m">0</span> root run-parts /etc/cron.weekly
<span class="m">42</span> <span class="m">4</span> <span class="m">1</span> * * root run-parts /etc/cron.monthly
</pre></div>
</div>
<p>las líneas que ejecutan las tareas programadas propiamente. No hay límites de cuantas tareas pueda haber, una por renglón. Los campos (son 7) que forman estas líneas están formados de la siguiente manera:</p>
<ol class="arabic simple">
<li><p>Minuto: Controla el minuto de la hora en que el comando será ejecutado, este valor debe de estar entre 0 y 59.</p></li>
<li><p>Hora: Controla la hora en que el comando será ejecutado, se especifica en un formato de 24 horas, los valores deben estar entre 0 y 23, 0 es medianoche.</p></li>
<li><p>Día del Mes: Día del mes en que se quiere ejecutar el comando. Por ejemplo se indicaría 20, para ejecutar el comando el día 20 del mes.</p></li>
<li><p>Mes: Mes en que el comando se ejecutará, puede ser indicado numéricamente (1-12), o por el nombre del mes en inglés, solo las tres primeras letras.</p></li>
<li><p>Día de la semana: Día en la semana en que se ejecutará el comando, puede ser numérico (0-7) o por el nombre del día en inglés, solo las tres primeras letras. (0 y 7 = domingo)</p></li>
<li><p>Usuario: Usuario que ejecuta el comando.</p></li>
<li><p>Comando: Comando, script o programa que se desea ejecutar. Este campo puede contener múltiples palabras y espacios.</p></li>
</ol>
<p>Ejemplos:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">01</span> * * * *       Se ejecuta al minuto <span class="m">1</span> de cada hora de todos los días
<span class="m">15</span> <span class="m">8</span> * * *       A las <span class="m">8</span>:15 a.m. de cada día
<span class="m">15</span> <span class="m">20</span> * * *      A las <span class="m">8</span>:15 p.m. de cada día
<span class="m">00</span> <span class="m">5</span> * * <span class="m">0</span>       A las <span class="m">5</span> a.m. todos los domingos
* <span class="m">5</span> * * Sun      Cada minuto de <span class="m">5</span>:00a.m. a <span class="m">5</span>:59a.m. todos los domingos
<span class="m">45</span> <span class="m">19</span> <span class="m">1</span> * *      A las <span class="m">7</span>:45 p.m. del primero de cada mes
<span class="m">01</span> * <span class="m">20</span> <span class="m">7</span> *      Al minuto <span class="m">1</span> de cada hora del <span class="m">20</span> de julio
<span class="m">10</span> <span class="m">1</span> * <span class="m">12</span> <span class="m">1</span>      A la <span class="m">1</span>:10 a.m. todos los lunes de diciembre
<span class="m">00</span> <span class="m">12</span> <span class="m">16</span> * Wen   Al mediodía de los días <span class="m">16</span> de cada mes y que sea Miércoles
<span class="m">30</span> <span class="m">9</span> <span class="m">20</span> <span class="m">7</span> <span class="m">4</span>      A las <span class="m">9</span>:30 a.m. del dia <span class="m">20</span> de julio y que sea jueves
<span class="m">30</span> <span class="m">9</span> <span class="m">20</span> <span class="m">7</span> *      A las <span class="m">9</span>:30 a.m. del dia <span class="m">20</span> de julio sin importar el día de la semana
<span class="m">20</span> * * * <span class="m">6</span>       Al minuto <span class="m">20</span> de cada hora de los sábados
<span class="m">20</span> * * <span class="m">1</span> <span class="m">6</span>       Al minuto <span class="m">20</span> de cada hora de los sábados de enero
</pre></div>
</div>
<p>Ejemplo que se ejecute cada minuto:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>crontab -l
* * * * * /root/encendido.sh
</pre></div>
</div>
<p>El programa cron se invoca cada minuto y ejecuta las tareas que sus campos se cumplan en ese preciso minuto.</p>
<p>Ejemplo de la utilización de rsync para hacer copias de seguridad</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rsync -av --delete /home/dani /media/dani/Backup/
rsync -av --delete -e <span class="s1">&#39;ssh -p22&#39;</span> dani@IP:/home/dani/ /media/dani/Backup/
</pre></div>
</div>
</section>
<section id="systemd">
<h2>Systemd<a class="headerlink" href="#systemd" title="Enlace permanente a este encabezado">#</a></h2>
<p>Antiguamente se utilizaba el proceso init,  este es el proceso “padre”, es el primer proceso que se ejecuta al iniciar el sistema(es lanzado directamente por el kernel), y se encarga de lanzar todos los demás procesos.</p>
<p>Hace ya tiempo salio la noticia de que Ubuntu cambiaría su sistema init por Upstart, esto ocurrirá con la versión de Ubuntu 15.04 Vivid Vervet. El demonio init tradicional es estrictamente síncrono, bloqueando futuras tareas hasta que la actual se haya completado. Sus tareas deben ser definidas por adelantado, y solo pueden ser ejecutadas cuando el demonio init cambia de estado (cuando la máquina se arranca o se apaga).</p>
<p>Hoy en día Ubuntu ha cambiado upstart por Systemd. Systemd está hecho para proveer un mejor framework para expresar las dependencias del servicio, permite hacer más trabajo paralelamente al inicio del sistema y reducir la sobrecarga del shell. El nombre viene del sufijo system daemon (procesos en segundo plano) con la letra “d”.
Lo podemos comprobar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls /sbin/init -l
lrwxrwxrwx <span class="m">1</span> root root <span class="m">20</span> sep <span class="m">17</span> <span class="m">10</span>:35 /sbin/init -&gt; /lib/systemd/systemd
</pre></div>
</div>
<p>Systemd remplaza a la secuencia de arranque de Linux y los niveles de ejecución controlados por el demonio de inicio tradicional , junto con la ejecución de los scripts bajo su control.</p>
<p>En systemd el primer demonio de ejecución se llama precisamente systemd y es el que tiene PID 1.</p>
<p>En systemd los servicios se denominan units. Cada unit se define en un archivo donde se especifica un proceso para arrancar por systemd. Evidentemente el arranque de un unit puede estar supeditado a determindas circunstancias como la dependencia de otros units.</p>
<p>Existen varios tipos de <strong>units</strong>, no sólo servicios, cuyos archivos se nombran con la extensión correspondiente:</p>
<ul class="simple">
<li><p>servicios (.service)</p></li>
<li><p>puntos de montaje (.mount)</p></li>
<li><p>dispositivos (.device)</p></li>
<li><p>sockets (.socket)</p></li>
</ul>
<p>Los archivos que definen los units (y los targets) se pueden encontrar básicamente en tres ubicaciones distintas:</p>
<ul class="simple">
<li><p><strong>/usr/lib/systemd/system/</strong>: unidades distribuidas con paquetes RPM instalados.</p></li>
<li><p><strong>/run/systemd/system/</strong>: unidades creadas en tiempo de ejecución. Tiene precedencia sobre el directorio anterior.</p></li>
<li><p><strong>/etc/systemd/system/</strong>: unidades creadas y administradas por el administrador del sistema. Este directorio tiene precedencia sobre el directorio anterior.</p></li>
</ul>
<p>El formato de un archivo unit sigue unas reglas y nomenclatura específicas. Básicamente se divide en varias secciones se las cuales las principales son:</p>
<ul class="simple">
<li><p><strong>[Unit]</strong></p></li>
<li><p><strong>[Service]</strong></p></li>
<li><p><strong>[Install]</strong></p></li>
</ul>
<p>A continuación se indican esquemáticamente las opciones más importantes dentro de cada sección.</p>
</section>
<section id="unit">
<h2>[Unit]<a class="headerlink" href="#unit" title="Enlace permanente a este encabezado">#</a></h2>
<p><strong>Description=&lt;descrición del unit&gt;</strong></p>
<p>Una descripción del servicio que se muestra al consultar el status del servicio.</p>
<p><strong>After=&lt;units&gt;</strong></p>
<p>Define el orden en el cual los unist se inician. El unit se inicia sólo después de que los units especificados en esta línea estén activos. La diferencia con Require es que After no activa explícitamente los units indicados aquí. La opción Before tiene la funcionalidad opuesta a After.</p>
<p><strong>Requires=&lt;units&gt;</strong></p>
<p>Configuras las dependencias sobre otras units. Los units listados aquí serán activados junto con este unit. Si alguno de los units requeridos falla en el arranque, este unit tampoco se activa.</p>
<p><strong>Wants=&lt;units&gt;</strong></p>
<p>Activa los units indicados aquí. Wants configura dependencias de manera más débil que Require. Si alguno de los units indicados por Wants no se inician correctamente no tienen ningún efecto en el estado de este unit. Wants es la manera recomendada para establecer dependencias personalizadas.</p>
<p><strong>Conflicts=&lt;units&gt;</strong></p>
<p>Configura dependencias negativas, es decir, es un opuesto a Requires. El servicio no se inicia si el servicio indicado en esta línea está activo.</p>
</section>
<section id="service">
<h2>[Service]<a class="headerlink" href="#service" title="Enlace permanente a este encabezado">#</a></h2>
<p><strong>TimeoutStartSec=&lt;n&gt;</strong></p>
<p>Tiempo tras el cuál, si el servicio no ha arrancado, se considera fallo y se detiene.</p>
<p><strong>ExecStart=&lt;ejecutable&gt;</strong></p>
<p>comando a ejecutar.</p>
<p><strong>Type=&lt;opción&gt;</strong></p>
<p>Configura el tipo de arranque del procesos de la unidad la cual afecta a la funcionalidad ExecStart. Las opciones son:</p>
<ul class="simple">
<li><p><strong>simple</strong> – Es el valor por defecto. El proceso arrancado con ExecStart es el proceso principal del servicio. Este proceso se arranca inmediatamente. El proceso no debe desencadenar otros procesos que requieran ejecución en el algún orden. No utilizar este tipo si otros servicios necesitan ejecutarse en orden con él.</p></li>
<li><p><strong>forking</strong> – El proceso iniciado con ExecStart genera un proceso hijo que se convierte en el proceso principal del servicio. Se sale del proceso padre cuando el arranque se completa. El uso de esta opción es importante cuando ejecutamos un script que a su vez ejecuta otros procesos. Sin la opción forking estos subprocesos podrían salir inesperadamente al concluir el proceso principal.</p></li>
<li><p><strong>oneshot</strong> – Similar a simple, pero se sale del proceso antes de que se arranquen los subsiguientes units. Es útil para la ejecución de scripts que hacen un trabajo sencillo y luego salen. Con la opción RemainAfterExit=yes systemd considerará su proceso como activo después de que el proceso haya salido.</p></li>
<li><p><strong>dbus</strong> – Similar a simple, pero los subsiguientes units sólo son arrancados después de que el proceso principal adquiera un nombre D-Bus.</p></li>
<li><p><strong>notify</strong> – Similar a simple, pero los subsiguientes units sólo son arrancados después de que un mensaje de notificación se haya enviado mediante una función sd_notify().</p></li>
<li><p><strong>idle</strong> – Similar a simple, la ejecución actual del binario del servicio se retrasa hasta que todos los trabajos se terminan, lo que evita la mezcla de la salida de estados con las salidas de los servicios por la Shell.</p></li>
</ul>
</section>
<section id="install">
<h2>[Install]<a class="headerlink" href="#install" title="Enlace permanente a este encabezado">#</a></h2>
<p><strong>WantedBy=multi-user.target</strong></p>
<p>Indica el target al que pertenece este unit. Esto provoca que el comando systemctl enable &lt;servicio&gt;.service cree los enlaces simbólicos necesarios dentro del target multi-user.target.wants sin necesidad de hacerlo manualmente.</p>
<p>Lo que se consigue con esto es que el servicio se ejecute automáticamente al arrancar se target.</p>
</section>
<section id="los-targets">
<h2>Los Targets<a class="headerlink" href="#los-targets" title="Enlace permanente a este encabezado">#</a></h2>
<p>Un conjunto de units definen un target. El target es el equivalente al concepto de runlevel, es decir un conjunto de servicios que se ejecutan en determinadas circunstancias. Así por ejemplo, el runlevel 3 de System V corresponde al target multi-user.target en systemd y el runlevel 5 correspondería al target llamado  graphical.target 0 # Apaga el sistema</p>
<ul class="simple">
<li><p>1, Mono usuario #Modo mono-usuario</p></li>
<li><p>2, 4 Modo de inicio definido por el usuario/sistema, por default identico a 3</p></li>
<li><p>3 Multiusuario, entorno grafico</p></li>
<li><p>5 Multiusuario, entorno grafico, todos los servicios del nivel 3 mas un entorno grafico</p></li>
<li><p>6 Reinicio</p></li>
</ul>
<p>reinicio #Shell de emergencia</p>
<p>A diferencia de los runlevels, los targests se pueden ejecutar a la vez.</p>
</section>
<section id="systemctl">
<h2>Systemctl<a class="headerlink" href="#systemctl" title="Enlace permanente a este encabezado">#</a></h2>
<p>En Systemd la forma de controlar los servicios del sistema cambia. Los servicios ya no se controlan a través de /etc/init.d y tampoco se utiliza el comando “service”. Aquí se utiliza el gestor de servicios llamado <strong>systemctl</strong>.</p>
<p>La principal orden para controlar systemd es systemctl. systemctl sustituye a chkconfig de System V.</p>
<p>systenctl es una herramienta potente con muchas opciones. A continuación se listan los más importantes atendiendo su funcionalidad.</p>
</section>
<section id="gestion-de-servicios">
<h2>GESTION DE SERVICIOS<a class="headerlink" href="#gestion-de-servicios" title="Enlace permanente a este encabezado">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>systemctl                              <span class="c1">#Lista servicios y unidades disponibles en el sistema.</span>
systemctl list-unit-files              <span class="c1">#Lista ficheros de unidades</span>
systemctl list-units                   <span class="c1">#Lista servicios disponibles q</span>
systemctl list-dependencies &lt;servicio&gt; <span class="c1">#Lista las dependencias de un servicio</span>
systemctl show &lt;service&gt;               <span class="c1"># Visualizar las propiedades del unit.</span>
systemctl start &lt;servicio&gt;             <span class="c1"># Arrancar servicios.</span>
systemctl stop &lt;servicio&gt;              <span class="c1"># Parar servicios.</span>
systemctl status &lt;service&gt;             <span class="c1"># Visualiza el estado e información de un servicio.</span>
systemctl is-active &lt;service&gt;          <span class="c1"># Muestra simplemente si el servicio está activo</span>
systemctl <span class="nb">enable</span> &lt;servicio&gt;            <span class="c1"># Habilita un servicio en el arranque.</span>
systemctl disable &lt;servicio&gt;           <span class="c1"># Deshabilita un servicio en el arranque.</span>
systemctl restart &lt;servicio&gt;           <span class="c1"># Reinicia un servicio.</span>
systemctl reload &lt;servicio&gt;            <span class="c1"># Recarga la configuración de un servicio si reiniciarlo</span>
systemctl mask &lt;servicio&gt;              <span class="c1"># Marca un servicio como completamente inarrancable</span>
</pre></div>
</div>
<p>Ejemplo :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ service --status-all <span class="p">|</span> grep ssh
 <span class="o">[</span> + <span class="o">]</span>  ssh

$ systemctl stop ssh

$ service --status-all <span class="p">|</span> grep ssh
<span class="o">[</span> - <span class="o">]</span>  ssh

$ systemctl start ssh
$ service --status-all <span class="p">|</span> grep ssh
<span class="o">[</span> + <span class="o">]</span>  ssh
</pre></div>
</div>
</section>
<section id="ejemplo-de-encadenamiento-de-servicios">
<h2>Ejemplo de encadenamiento de servicios<a class="headerlink" href="#ejemplo-de-encadenamiento-de-servicios" title="Enlace permanente a este encabezado">#</a></h2>
<p>Servicio A personalizado se ejecuta automáticamente en el arranque con el target multi-user.target:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Servicio A
<span class="nv">Requires</span><span class="o">=</span>multi-user.target
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/bin/servicioA.sh
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.targe
</pre></div>
</div>
<p>Servicio A se ejecuta automáticamente con el arranque en el target multi-user.target. El servicio A una vez iniciado, lanza al servicio B:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Servicio A
<span class="nv">Requires</span><span class="o">=</span>multi-user.target
<span class="nv">Wants</span><span class="o">=</span>ServicioB.service
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/bin/servicioA.sh
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></div>
</div>
<p>servicio B</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Servicio B
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/bin/servicioB.sh
<span class="o">[</span>Install<span class="o">]</span>
</pre></div>
</div>
<p>Servicio A se ejecuta automáticdamnete con el arranque en el target multi-user.target. Una vez inicado el servicio A, éste lanza al servicio B cuando el servico A concluye:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Servicio A
<span class="nv">Requires</span><span class="o">=</span>multi-user.target
<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/bin/servicioA.sh
<span class="nv">ExecStop</span><span class="o">=</span>/usr/bin/systemctl start ServicioB.service
<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target
</pre></div>
</div>
<p>servicio B</p>
</section>
<section id="ejemplo-de-enrutamiento">
<h2>Ejemplo de enrutamiento<a class="headerlink" href="#ejemplo-de-enrutamiento" title="Enlace permanente a este encabezado">#</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat /root/enrutar.sh
<span class="c1">#!/bin/bash</span>
<span class="nb">echo</span> <span class="m">1</span> &gt; /proc/sys/net/ipv4/ip_forward
iptables -F
iptables -A FORWARD -j ACCEPT
iptables -t nat -A POSTROUTING -s <span class="m">10</span>.0.2.0/24 -o enp0s3 -j MASQUERADE
</pre></div>
</div>
<p>Para que se inicie automáticamente utilizamos el sistema systemctl</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ cat /etc/systemd/system/enrutar.service

<span class="o">[</span>Unit<span class="o">]</span>
<span class="nv">Description</span><span class="o">=</span>Inicia enrutamiento
<span class="nv">After</span><span class="o">=</span>syslog.target

<span class="o">[</span>Service<span class="o">]</span>
<span class="nv">ExecStart</span><span class="o">=</span>/root/enrutar.sh
<span class="nv">User</span><span class="o">=</span>root

<span class="o">[</span>Install<span class="o">]</span>
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

$ chmod +x /root/enrutar.sh
$ systemctl <span class="nb">enable</span> enrutar.service
$ systemctl start enrutar.service
$ systemctl list-unit-files
</pre></div>
</div>
</section>
<section id="acceder-a-los-registros-del-sistema">
<h2>Acceder a los registros del sistema<a class="headerlink" href="#acceder-a-los-registros-del-sistema" title="Enlace permanente a este encabezado">#</a></h2>
<p>La forma básica de acceder a los registros del sistema es:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>journalctl                             <span class="c1"># cat /var/log/messages</span>
journalctl -f                          <span class="c1"># tail -f /var/log/messages</span>
journalctl --list-boots                <span class="c1"># Filtrar la salida de logs por boots</span>
journalctl -b                          <span class="c1"># Logs del boot actual</span>
journalctl -b -1                       <span class="c1"># Anteriores</span>
journalctl -k                          <span class="c1"># Ver los mensajes del kernel</span>
journalctl -n                          <span class="c1"># Filtrar por número de entradas</span>
journalctl <span class="nv">_COMM</span><span class="o">=</span>NetworkManager        <span class="c1"># Filtras por ejecutables o programas</span>
journalctl /usr/sbin/NetworkManager    <span class="c1"># Filtrar por especificando la ruta</span>
journalctl <span class="nv">_PID</span><span class="o">=</span><span class="m">2527</span>                   <span class="c1"># Mostrar la salida por PID</span>
journalctl <span class="nv">_UID</span><span class="o">=</span><span class="m">1001</span>                   <span class="c1"># id de los usuarios</span>
journalctl --since <span class="s1">&#39;30 min ago&#39;</span>        <span class="c1"># Última media hora:</span>
journalctl /dev/sda                    <span class="c1"># Funcionamiento en nuestras unidades de discos duros</span>
journalctl --disk-usage                <span class="c1"># Ver el espacio que están ocupando</span>
systemctl list-units -t service --all  <span class="c1"># Filtrar la salida por servicios de systemd</span>
journalctl -u dbus.service             <span class="c1"># Si nos interesa uno en particular</span>

<span class="c1">#Filtrar por intervalos de tiempo</span>
journalctl --since <span class="s1">&#39;yesterday&#39;</span> --until <span class="s1">&#39;02:00&#39;</span>
journalctl --since<span class="o">=</span><span class="s1">&#39;2015-02-29 00:01&#39;</span> --until<span class="o">=</span><span class="s1">&#39;2015-03-29 00:01&#39;</span>
<span class="c1">#Filtrar por programas e intervalos</span>
journalctl <span class="nv">_COMM</span><span class="o">=</span>firefox --since<span class="o">=</span><span class="s1">&#39;2015-02-29 00:01&#39;</span> --until<span class="o">=</span><span class="s1">&#39;2015-03-29 00:01&#39;</span>
journalctl -u sshd.service --since<span class="o">=</span><span class="s1">&#39;2015-02-29 00:01&#39;</span> --until<span class="o">=</span><span class="s1">&#39;2015-03-29 00:01&#39;</span>
</pre></div>
</div>
</section>
</section>


                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="05_samba.html"
       title="página anterior">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">anterior</p>
        <p class="prev-next-title">Samba</p>
      </div>
    </a>
    <a class="right-next"
       href="07_comandos_avanzados.html"
       title="siguiente página">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">siguiente</p>
        <p class="prev-next-title">Comandos avanzados</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenido
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#comando-at">Comando at</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crontab">Crontab</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#systemd">Systemd</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit">[Unit]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#service">[Service]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">[Install]</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#los-targets">Los Targets</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#systemctl">Systemctl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-servicios">GESTION DE SERVICIOS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-encadenamiento-de-servicios">Ejemplo de encadenamiento de servicios</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ejemplo-de-enrutamiento">Ejemplo de enrutamiento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#acceder-a-los-registros-del-sistema">Acceder a los registros del sistema</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Por dgtrabada
</p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>