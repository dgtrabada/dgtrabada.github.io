
<!DOCTYPE html>


<html lang="es" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Ejercicios de shell scripting &#8212; dgtrabada</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/tabs.css?v=a5c4661c" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=40e79d90"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script src="../../_static/translations.js?v=f85f4cfb"></script>
    <script src="../../_static/tabs.js?v=3030b3cb"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'so/GNULinux/15_ejercicios_shell_scripting';</script>
    <link rel="icon" href="../../_static/ico.png"/>
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="Windows" href="../windows/index.html" />
    <link rel="prev" title="Shell Scripting" href="15_shell_scripting.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="es"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">dgtrabada</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Búsqueda</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../historia/index.html">Historia</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../historia/Introduccion.html">Introducción</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/mecanicos.html">Dispositivos mecánicos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/electricicidad.html">Transición, la electricicidad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/1gen.html">Primera generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/2gen.html">Segunda generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/3gen.html">Tercera generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/4gen.html">Cuarta generación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../historia/SXXI.html">SXXI</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">Sistemas Operativos</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../teoria/medida_representacion_informacion.html">Medida y representación de la información</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistema_anal%C3%B3gico_digital.html">Sistema analógico &amp; digital</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/medida_informacion.html">Medida de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/representacion_informacion.html">Representación de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_numeracion.html">Sistemas de numeración</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/cambio_base_decimales.html">Cambio de base con decimales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_codificacion.html">Sistemas de codificación</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/imagen_digital.html">Imagen digital</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../fundamentos/index.html">Fundamentos de sistemas operativos</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/so_evolucion_sistema_operativo.html">Evolución del Sistema Operativo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/so_licencias.html">Tipos software y licencias</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/sistemas_operativos.html">Sistemas operativos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_procesos.html">Gestión de procesos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_memoria.html">Gestión de memoria</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/sistema_archivos.html">Sistema de archivos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fundamentos/gestion_arranque.html">Gestión arranque</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../maquinas_virtuales.html">La virtualización</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particiones.html">Particiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/raid.html">RAID</a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="index.html">GNU/Linux</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="00_historia.html">Historia GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="01_comandos_basicos.html">Comandos básicos GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_permisos.html">Permisos en GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_usuarios.html">Usuarios y grupos GNU/Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_ssh.html">SSH</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_samba.html">Samba</a></li>
<li class="toctree-l3"><a class="reference internal" href="05_apache.html">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="06_automatizacion_tareas.html">Automatización de tareas y servicios</a></li>
<li class="toctree-l3"><a class="reference internal" href="07_comandos_avanzados.html">Comandos avanzados</a></li>
<li class="toctree-l3"><a class="reference internal" href="08_NIS.html">NIS</a></li>
<li class="toctree-l3"><a class="reference internal" href="09_GNULinux_NFS.html">NFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="10_slurm.html">Slurm</a></li>
<li class="toctree-l3"><a class="reference internal" href="11_modules.html">Environment modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="12_ansible.html">Ansible</a></li>
<li class="toctree-l3"><a class="reference internal" href="13_ldap.html">LDAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="14_rockylinux.html">Rocky Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="15_shell_scripting.html">Shell Scripting</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Ejercicios de shell scripting</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../windows/index.html">Windows</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../windows/01_historia.html">Historia de Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/02_configuracion.html">Configuración Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/03_usuarios_grupos.html">Usuarios y grupos Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/04_arranque.html">Arranque de Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/05_comandos_dos.html">Comandos ms-dos</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/06_powershell.html">PowerShell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/07_AD_DS.html">Active Directory Domain Services (AD DS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/08_Caso_practico_AD.html">Casos prácticos : Active Directory con adaptador puente</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/08_Caso_practico_AD_redint.html">Casos prácticos : Active Directory con red interna</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/09_Caso_practico_AD_sin_GUI.html">Casos prácticos : Active Directory sin GUI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/10_powershell_scripting.html">PowerShell Scripting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/10_ejercicios_powershell.html">Ejercicios de PowerShell</a></li>
<li class="toctree-l3"><a class="reference internal" href="../windows/11_bat.html">Scripting .bat</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../clonacion.html">Clonación</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../hardware/index.html">Hardware</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../teoria/medida_representacion_informacion.html">Medida y representación de la información</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistema_anal%C3%B3gico_digital.html">Sistema analógico &amp; digital</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/medida_informacion.html">Medida de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/representacion_informacion.html">Representación de la información</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_numeracion.html">Sistemas de numeración</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/cambio_base_decimales.html">Cambio de base con decimales</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/sistemas_codificacion.html">Sistemas de codificación</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../teoria/imagen_digital.html">Imagen digital</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/mantenimiento.html">Mantenimiento de sistemas informáticos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/bios.html">BIOS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/uefi.html">UEFI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/diccionario.html">Diccionario de la BIOS/UEFI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/dispositivos_alamacenamiento.html">Dispositivos de almacenamiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../particiones.html">Particiones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/buses.html">Buses y conectores de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/raid.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/historia_microsprocesador.html">Breve historia del procesador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/microprocesadores.html">Microprocesadores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/encapsuladors.html">Encapsulados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/ventilacion.html">Ventilación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/ram.html">Memoria RAM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conceptos_electronicos.html">Conceptos eléctricos - electrónicos y elementos básicos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/fuente_alimentacion.html">Fuentes de Alimentación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conectores_potencia.html">Cableado y conectores de potencia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/sai.html">Sistemas de alimentación interrumpida</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/puertas_logicas.html">Puertas lógicas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/arquitectura.html">Arquitectura del ordenador</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/carcasa.html">La carcasa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/placa_base.html">La placa base, el “chipset”, la EPROM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/conectores.html">Conectores y buses externos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/tarjetas.html">Tarjetas de expansión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/perifericos.html">Periféricos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/cpd.html">Centro de Proceso de Datos (CPD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware/diagnostico.html">Herramientas de diagnostico</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../redes/index.html">Redes</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../redes/sistemas_comunicacion.html">Sistema de comunicación</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/tipos_tecnicas_transmision_datos.html">Tipos y técnicas de transmisión de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/sistemas_red.html">Sistemas en red</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/medios_transmision.html">Medios de transmisión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/perturbaciones.html">Perturbaciones en la transmisión de datos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/topologia.html">Topologías de red y modos de conexión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/redes_inalambricas.html">Tipos de redes 802.11</a></li>



<li class="toctree-l2"><a class="reference internal" href="../../redes/anquitectura_niveles.html">Arquitecturas basadas en niveles</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/transporte_datos_equipos_interconexion.html">Transporte de datos y equipos de interconexión</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/Direccionamiento_IP.html">Direccionamiento IP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/casos_practicos.html">Casos prácticos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../redes/cableado_estructurado.html">Cableado Estructurado</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../odoo/index.html">Odoo</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/01_ERP-CRM.html">ERP-CRM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/02_odoo.html">Odoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/03_Inf_empresa.html">Información de la empresa</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/04_taza_lapiz_camiseta.html">Taza, lápiz y camiseta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/05_Directorio_fotos.html">Directorio Fotos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/06_instalacion_odoo.html">Instalación odoo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/07_Sitio_Web.html">Sitio Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/08_copia_seguridad.html">Copia de seguridad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/09_Usuarios_sistema.html">Usuarios del sistema</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/10_empleados.html">Empleados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/11_Inventario.html">Inventario</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/12_ventas.html">Ventas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/13_calendario.html">Calendario</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/14_proyecto.html">Proyecto</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/15_encuestas.html">Encuestas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/16_ausencias.html">Ausencias</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/17_tableros.html">Tableros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/18_mantenimineto.html">Mantenimiento</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/19_notas.html">Notas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/20_crm.html">CRM</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/21_flota.html">Flota</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/22_punto_venta.html">Punto de venta</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/23_restaurante.html">Restaurante</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/24_compra.html">Compra</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/25_reparaciones.html">Reparaciones</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/26_eventos.html">Eventos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/27_modulo.html">Crear un modulo/app</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/28_crear_campo.html">Crear campo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/29_infomod.html">Información del módulo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/30_selfenvuser.html">self.env.user</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/31_menuitem.html">Menuitem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../odoo/32_presentacion.html">Presentación</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../python/index.html">Python</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Descarga esta pagina">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/so/GNULinux/15_ejercicios_shell_scripting.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Descargar archivo fuente"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Imprimir en PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Modo de pantalla completa"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Búsqueda" aria-label="Búsqueda" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Ejercicios de shell scripting</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contenido </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-usuarios-locales">Gestión de usuarios locales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-usuarios-ldap">Gestión de usuarios LDAP</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="ejercicios-de-shell-scripting">
<h1>Ejercicios de shell scripting<a class="headerlink" href="#ejercicios-de-shell-scripting" title="Link to this heading">#</a></h1>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">disk.sh</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>disk.sh</strong> que imprima por pantalla el porcentaje que esta ocupada la partición <code class="docutils literal notranslate"><span class="pre">/home</span></code>. Tiene que quedar:</p>
<p><code class="docutils literal notranslate"><span class="pre">75%</span> <span class="pre">/home</span></code></p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

df<span class="w"> </span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>home<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f5-
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-1-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-1-1-0" name="1-0" role="tab" tabindex="0">mem.sh</button><button aria-controls="panel-1-1-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-1-1-1" name="1-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-1-1-0" class="sphinx-tabs-panel" id="panel-1-1-0" name="1-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>mem.sh</strong>, obtiene solamente la memoria en MB ocupada y haz que se escriban en un archivo llamado <code class="docutils literal notranslate"><span class="pre">free.log</span></code> cada vez que se ejecute, sin borrar el anterior registro.</p>
</div><div aria-labelledby="tab-1-1-1" class="sphinx-tabs-panel" hidden="true" id="panel-1-1-1" name="1-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

free<span class="w"> </span>-h<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Mem<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f4<span class="w"> </span>&gt;&gt;<span class="w"> </span>free.log
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-2-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-2-2-0" name="2-0" role="tab" tabindex="0">mac.sh</button><button aria-controls="panel-2-2-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-2-2-1" name="2-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-2-2-0" class="sphinx-tabs-panel" id="panel-2-2-0" name="2-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>mac.sh</strong> que obtiene la MAC de tu tarjeta de red</p>
</div><div aria-labelledby="tab-2-2-1" class="sphinx-tabs-panel" hidden="true" id="panel-2-2-1" name="2-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

ip<span class="w"> </span>link<span class="w"> </span>show<span class="w"> </span>enp2s0<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>link<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w">  </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f3
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-3-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-3-3-0" name="3-0" role="tab" tabindex="0">listar_usuario_grupo.sh</button><button aria-controls="panel-3-3-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-3-3-1" name="3-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-3-3-0" class="sphinx-tabs-panel" id="panel-3-3-0" name="3-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>listar_usuario_grupo.sh</strong> que saque por pantalla el nombre de los usuarios que hay creados en el sistema y al grupo que pertenecen, por ejemplo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>alumno1<span class="w"> </span>:<span class="w"> </span>smr1
alumno2<span class="w"> </span>:<span class="w"> </span>smr1
alumno3<span class="w"> </span>:<span class="w"> </span>asir1
alumno4<span class="w"> </span>:<span class="w"> </span>asir2
</pre></div>
</div>
</div><div aria-labelledby="tab-3-3-1" class="sphinx-tabs-panel" hidden="true" id="panel-3-3-1" name="3-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>bash<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-v<span class="w"> </span>root<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span>groups<span class="w"> </span><span class="nv">$i</span>
<span class="k">done</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-4-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-4-4-0" name="4-0" role="tab" tabindex="0">lastlog_ip.sh</button><button aria-controls="panel-4-4-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-4-4-1" name="4-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-4-4-0" class="sphinx-tabs-panel" id="panel-4-4-0" name="4-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>lastlog_ip.sh</strong> que muestre un listado ordenado con el nº de veces que se a logueado cada ip, por ejemplo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">16</span><span class="w"> </span><span class="m">10</span>.2.104.100
<span class="m">11</span><span class="w"> </span><span class="m">10</span>.2.3.100
<span class="m">10</span><span class="w"> </span><span class="m">139</span>.47.103.76
<span class="m">9</span><span class="w"> </span><span class="m">10</span>.2.105.100
<span class="m">8</span><span class="w"> </span><span class="m">2</span>.153.195.106
<span class="m">8</span><span class="w"> </span><span class="m">10</span>.2.4.100
<span class="m">8</span><span class="w"> </span><span class="m">10</span>.2.105.106
</pre></div>
</div>
</div><div aria-labelledby="tab-4-4-1" class="sphinx-tabs-panel" hidden="true" id="panel-4-4-1" name="4-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>last<span class="w"> </span>-w<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w">  </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f3<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w">  </span>grep<span class="w"> </span><span class="s1">&#39;\.&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="k">)</span><span class="p">;</span><span class="w"> </span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="k">$(</span>last<span class="w"> </span>-w<span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$i</span><span class="k">)</span><span class="w"> </span><span class="nv">$i</span><span class="w"> </span>
<span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rn

<span class="c1">#last -w | tr -s &#39; &#39;  | cut -d&#39; &#39; -f3 | grep &#39;\.&#39; | sort | uniq -c | sort -r</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-5-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-5-5-0" name="5-0" role="tab" tabindex="0">lastlog.sh</button><button aria-controls="panel-5-5-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-5-5-1" name="5-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-5-5-0" class="sphinx-tabs-panel" id="panel-5-5-0" name="5-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>lastlog.sh</strong> que muestre un listado ordenado con el nº de veces que se a logueado cada usuario y el grupo al que pertenecen, por ejemplo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">44</span><span class="w"> </span>alumno1<span class="w"> </span>smr1
<span class="m">32</span><span class="w"> </span>alumno2<span class="w"> </span>smr1
<span class="m">14</span><span class="w"> </span>alumno3<span class="w"> </span>asir1
<span class="m">4</span><span class="w"> </span>alumno4<span class="w"> </span>asir2
</pre></div>
</div>
</div><div aria-labelledby="tab-5-5-1" class="sphinx-tabs-panel" hidden="true" id="panel-5-5-1" name="5-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>last<span class="w"> </span>-w<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-v<span class="w"> </span>reboot<span class="w"> </span><span class="p">|</span><span class="w"> </span>egrep<span class="w"> </span>-v<span class="w">  </span>wtmp<span class="k">)</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="k">$(</span>last<span class="w"> </span>-w<span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$i</span><span class="k">)</span><span class="w"> </span><span class="nv">$i</span><span class="w">  </span><span class="k">$(</span>groups<span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="k">)</span>
<span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rn

<span class="c1">#last -w | tr -s &#39; &#39;  | cut -d&#39; &#39; -f1 | sort | uniq  -c | sort -r</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-6-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-6-6-0" name="6-0" role="tab" tabindex="0">tabla_multiplicar_read.sh</button><button aria-controls="panel-6-6-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-6-6-1" name="6-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-6-6-0" class="sphinx-tabs-panel" id="panel-6-6-0" name="6-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>tabla_multiplicar_read.sh</strong> que pide un número al usuario y muestre su tabla de multiplicar</p>
</div><div aria-labelledby="tab-6-6-1" class="sphinx-tabs-panel" hidden="true" id="panel-6-6-1" name="6-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Introduce un número para mostrar su tabla de multiplicar: &quot;</span>
<span class="nb">read</span><span class="w"> </span>numero

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="m">11</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
<span class="w">    </span><span class="nv">resultado</span><span class="o">=</span><span class="k">$((</span><span class="nv">numero</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">i</span><span class="k">))</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$numero</span><span class="s2"> x </span><span class="nv">$i</span><span class="s2"> = </span><span class="nv">$resultado</span><span class="s2">&quot;</span>
<span class="k">done</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-7-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-7-7-0" name="7-0" role="tab" tabindex="0">tabla_multiplicar.sh</button><button aria-controls="panel-7-7-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-7-7-1" name="7-1" role="tab" tabindex="-1">Solución</button><button aria-controls="panel-7-7-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-7-7-2" name="7-2" role="tab" tabindex="-1">Solución (arrray)</button></div><div aria-labelledby="tab-7-7-0" class="sphinx-tabs-panel" id="panel-7-7-0" name="7-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>tabla_multiplicar.sh</strong>, ahora no preguntara por el numero al usuario y haz muestre su tabla de multiplicar cuando se ejecute por ejemplo <code class="docutils literal notranslate"><span class="pre">./tabla_multiplicat.sh</span> <span class="pre">&lt;N&gt;</span></code> siendo &lt;N&gt; un numero del 1 al 10.</p>
<ul class="simple">
<li><p>En el caso de ejecutar <code class="docutils literal notranslate"><span class="pre">./tabla_multiplicat.sh</span> <span class="pre">--help</span></code> mostrara un mensaje de ayuda (consejo utiliza una función)</p></li>
<li><p>En el caso de ejecutar <code class="docutils literal notranslate"><span class="pre">./tabla_multiplicar.sh</span> <span class="pre">X</span> <span class="pre">Y</span> <span class="pre">Z</span> <span class="pre">...</span></code> , es decir con más de un argumento saldrá un mensaje <code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">se</span> <span class="pre">puede</span> <span class="pre">dar</span> <span class="pre">más</span> <span class="pre">de</span> <span class="pre">un</span> <span class="pre">argumento</span></code></p></li>
<li><p>En el caso de ejecutar <code class="docutils literal notranslate"><span class="pre">./tabla_multiplicar.sh</span></code> sin argumentos se ejecutara la opción de –help</p></li>
</ul>
</div><div aria-labelledby="tab-7-7-1" class="sphinx-tabs-panel" hidden="true" id="panel-7-7-1" name="7-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

mostrar_ayuda<span class="o">()</span><span class="w"> </span><span class="o">{</span>

<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Uso: ./tabla_multiplicar.sh [número]</span>
<span class="s2">    Este script muestra la tabla de multiplicar del número que se le pase como argumento.</span>
<span class="s2">    Opciones:</span>
<span class="s2">      --help   Muestra este mensaje de ayuda.</span>

<span class="s2">    Ejemplos:</span>
<span class="s2">    ./tabla_multiplicar.sh 4   Muestra la tabla de multiplicar del 4.&quot;</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">    </span><span class="c1"># Sin argumentos: mostrar ayuda</span>
<span class="w">    </span>mostrar_ayuda
<span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;--help&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>mostrar_ayuda
<span class="k">else</span>
<span class="w">    </span><span class="nv">numero</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="m">11</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="nv">resultado</span><span class="o">=</span><span class="k">$((</span><span class="nv">numero</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="nv">i</span><span class="k">))</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$numero</span><span class="s2"> x </span><span class="nv">$i</span><span class="s2"> = </span><span class="nv">$resultado</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">done</span>
<span class="k">fi</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-7-2" class="sphinx-tabs-panel" hidden="true" id="panel-7-7-2" name="7-2" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

mostrar_ayuda<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Uso: ./tabla_multiplicar_array.sh [número]</span>
<span class="s2">    Este script muestra la tabla de multiplicar del número que se le pase como argumento.</span>
<span class="s2">    Opciones:</span>
<span class="s2">      --help   Muestra este mensaje de ayuda.</span>

<span class="s2">    Ejemplos:</span>
<span class="s2">    ./tabla_multiplicar.sh 4   Muestra la tabla de multiplicar del 4.&quot;</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">    </span><span class="c1"># Sin argumentos: mostrar ayuda</span>
<span class="w">    </span>mostrar_ayuda
<span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;--help&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>mostrar_ayuda
<span class="k">else</span>
<span class="w">    </span><span class="nv">numero</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">   </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="m">11</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">   </span><span class="k">do</span>
<span class="w">     </span>A<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="nv">$i</span>
<span class="w">   </span><span class="k">done</span>
<span class="w">   </span><span class="nv">longitud</span><span class="o">=</span><span class="si">${#</span><span class="nv">A</span><span class="p">[@]</span><span class="si">}</span>
<span class="w">   </span><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="nv">$longitud</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">   </span><span class="k">do</span>
<span class="w">     </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$numero</span><span class="s2"> x </span><span class="si">${</span><span class="nv">A</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="s2"> = </span><span class="k">$((</span><span class="nv">$numero</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="si">${</span><span class="nv">A</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="k">))</span><span class="s2">&quot;</span>
<span class="w">   </span><span class="k">done</span>
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-8-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-8-8-0" name="8-0" role="tab" tabindex="0">imag.sh</button><button aria-controls="panel-8-8-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-8-8-1" name="8-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-8-8-0" class="sphinx-tabs-panel" id="panel-8-8-0" name="8-0" role="tabpanel" tabindex="0"><p>Crea una carpeta llamada imagenes, entra dentro y ejecuta los siguiente comandos:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span>jpeg<span class="w"> </span>jpg<span class="w"> </span>png<span class="w"> </span>gif<span class="w"> </span>tiff<span class="w"> </span>bmp<span class="w"> </span>svg
<span class="k">do</span>
<span class="w">  </span><span class="k">for</span><span class="o">((</span><span class="nv">j</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>j&lt;<span class="m">10</span><span class="p">;</span>j++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>imag_<span class="si">${</span><span class="nv">RANDOM</span><span class="si">}</span>.<span class="nv">$i</span><span class="w"> </span>&gt;<span class="w"> </span>imag_<span class="si">${</span><span class="nv">RANDOM</span><span class="si">}</span>.<span class="nv">$i</span>
<span class="w">  </span><span class="k">done</span>
<span class="k">done</span>
</pre></div>
</div>
<p>Crea un script llamado <strong>imag.sh</strong> que cambie todas extensiones de todos los archivos a png conservando el nombre</p>
</div><div aria-labelledby="tab-8-8-1" class="sphinx-tabs-panel" hidden="true" id="panel-8-8-1" name="8-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">nlineas</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="nv">T</span><span class="o">=</span><span class="m">0</span>.00
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nv">T</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; </span><span class="nv">$T</span><span class="s2">+</span><span class="k">$(</span>head<span class="w"> </span>-<span class="nv">$i</span><span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="k">done</span>
<span class="nv">T_media</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; </span><span class="nv">$T</span><span class="s2">/</span><span class="nv">$nlineas</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tenemos </span><span class="nv">$nlineas</span><span class="s2"> temperaturas, de media T = </span><span class="nv">$T_media</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-9-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-9-9-0" name="9-0" role="tab" tabindex="0">temperatura.sh</button><button aria-controls="panel-9-9-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-9-9-1" name="9-1" role="tab" tabindex="-1">Solución</button><button aria-controls="panel-9-9-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-9-9-2" name="9-2" role="tab" tabindex="-1">Solución (awk)</button><button aria-controls="panel-9-9-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-9-9-3" name="9-3" role="tab" tabindex="-1">Solución (array)</button></div><div aria-labelledby="tab-9-9-0" class="sphinx-tabs-panel" id="panel-9-9-0" name="9-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>temperatura.sh</strong>, que lea las temperatura del archivo <a class="reference external" href="https://raw.githubusercontent.com/dgtrabada/dgtrabada.github.io/refs/heads/master/source/so/GNULinux/scripts/temperatura.dat">temperatura.dat</a> y saque por pantalla la temperatura media</p>
</div><div aria-labelledby="tab-9-9-1" class="sphinx-tabs-panel" hidden="true" id="panel-9-9-1" name="9-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">nlineas</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="nv">T</span><span class="o">=</span><span class="m">0</span>.00
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nv">T</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; </span><span class="nv">$T</span><span class="s2">+</span><span class="k">$(</span>head<span class="w"> </span>-<span class="nv">$i</span><span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="k">done</span>
<span class="nv">T_media</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; </span><span class="nv">$T</span><span class="s2">/</span><span class="nv">$nlineas</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tenemos </span><span class="nv">$nlineas</span><span class="s2"> temperaturas, de media T = </span><span class="nv">$T_media</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-9-2" class="sphinx-tabs-panel" hidden="true" id="panel-9-9-2" name="9-2" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>


<span class="nv">media</span><span class="o">=</span><span class="k">$(</span>awk<span class="w"> </span><span class="s1">&#39;{ suma += $1 } END { print suma/NR }&#39;</span><span class="w"> </span>temperatura.dat<span class="w"> </span><span class="k">)</span>
<span class="nv">ntemperaturas</span><span class="o">=</span><span class="k">$(</span>awk<span class="w"> </span><span class="s1">&#39;END { print NR }&#39;</span><span class="w"> </span>temperatura.dat<span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tenemos </span><span class="nv">$ntemperaturas</span><span class="s2"> temperaturas, de media T = </span><span class="nv">$media</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-9-3" class="sphinx-tabs-panel" hidden="true" id="panel-9-9-3" name="9-3" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">nlineas</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span>T<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="k">$(</span>head<span class="w"> </span>-<span class="nv">$i</span><span class="w"> </span>temperatura.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span><span class="w"> </span>
<span class="k">done</span>

<span class="nv">suma</span><span class="o">=</span><span class="m">0</span>.00
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">suma</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$suma</span>+<span class="si">${</span><span class="nv">T</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="k">done</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$suma</span><span class="w"> </span>

<span class="nv">T_media</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; </span><span class="nv">$suma</span><span class="s2">/</span><span class="nv">$nlineas</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tenemos </span><span class="nv">$nlineas</span><span class="s2"> temperaturas, de media T = </span><span class="nv">$T_media</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-10-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-10-10-0" name="10-0" role="tab" tabindex="0">rnd.sh</button><button aria-controls="panel-10-10-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-10-10-1" name="10-1" role="tab" tabindex="-1">Solución</button><button aria-controls="panel-10-10-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-10-10-2" name="10-2" role="tab" tabindex="-1">Solución (array)</button></div><div aria-labelledby="tab-10-10-0" class="sphinx-tabs-panel" id="panel-10-10-0" name="10-0" role="tabpanel" tabindex="0"><p>Haz un script llamado <strong>rnd.sh</strong> que muestre 5 números aleatorios del 1 al 10 seguidos de el mismo número de As,</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">1</span><span class="w"> </span>A
<span class="m">3</span><span class="w"> </span>AAA
<span class="m">1</span><span class="w"> </span>A
<span class="m">6</span><span class="w"> </span>AAAAAA
<span class="m">2</span><span class="w"> </span>AA
</pre></div>
</div>
<p>Haz que el reciba como argumento de entrada en numero de intentos, es decir <code class="docutils literal notranslate"><span class="pre">./rnd.sh</span> <span class="pre">5</span></code></p>
<p>En el caso de no recibir ningún numero haz que saque 5</p>
</div><div aria-labelledby="tab-10-10-1" class="sphinx-tabs-panel" hidden="true" id="panel-10-10-1" name="10-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">n</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">5</span><span class="si">}</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span>n<span class="w"> </span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">  </span><span class="nv">x</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span><span class="s1">&#39; &#39;</span>
<span class="w">  </span><span class="nv">out</span><span class="o">=</span><span class="nv">$x</span><span class="s1">&#39; &#39;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">j</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>j&lt;x<span class="w"> </span><span class="p">;</span><span class="w"> </span>j++<span class="w"> </span><span class="o">))</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="nv">out</span><span class="o">=</span><span class="si">${</span><span class="nv">out</span><span class="si">}</span>A
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$out</span>
<span class="k">done</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-10-2" class="sphinx-tabs-panel" hidden="true" id="panel-10-10-2" name="10-2" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">n</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">5</span><span class="si">}</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span>n<span class="w"> </span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">  </span><span class="nv">x</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span><span class="s1">&#39; &#39;</span>
<span class="w">  </span>A<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="nv">$x</span><span class="s1">&#39; &#39;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">j</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>j&lt;x<span class="w"> </span><span class="p">;</span><span class="w"> </span>j++<span class="w"> </span><span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span>A<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="si">${</span><span class="nv">A</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span>A
<span class="w">  </span><span class="k">done</span>
<span class="k">done</span>


<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="w"> </span>n<span class="w"> </span><span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">A</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span>
<span class="k">done</span><span class="w"> </span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-11-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-11-11-0" name="11-0" role="tab" tabindex="0">adivina.sh</button><button aria-controls="panel-11-11-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-11-11-1" name="11-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-11-11-0" class="sphinx-tabs-panel" id="panel-11-11-0" name="11-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>adivina.sh</strong> que escoja un numero aleatorio entre 1 y 20, pregunte al usuario, le diga si es más pequeño o más grande y que continué hasta que acierte.</p>
<p>Cuando el usuario acierte haz que muestre el número de intentos.</p>
</div><div aria-labelledby="tab-11-11-1" class="sphinx-tabs-panel" hidden="true" id="panel-11-11-1" name="11-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Generar un número aleatorio entre 1 y 20</span>
<span class="nv">numero_secreto</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">20</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$numero_secreto</span>
<span class="nv">intentos</span><span class="o">=</span><span class="m">0</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;¡Adivina el número entre 1 y 20!&quot;</span>

<span class="nv">acertado</span><span class="o">=</span><span class="m">0</span>
<span class="k">while</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$acertado</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">intentos</span><span class="o">=</span><span class="k">$((</span><span class="nv">intentos</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="nb">read</span><span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;Introduce tu número: &quot;</span><span class="w"> </span>respuesta
<span class="w">  </span>
<span class="w">  </span><span class="c1"># Comparar el número ingresado con el número secreto</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$respuesta</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$numero_secreto</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;El número es más grande.&quot;</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$respuesta</span><span class="w"> </span>-gt<span class="w"> </span><span class="nv">$numero_secreto</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;El número es más pequeño.&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;¡Correcto! El número era </span><span class="nv">$numero_secreto</span><span class="s2">.&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Lo has adivinado en </span><span class="nv">$intentos</span><span class="s2"> intento(s).&quot;</span>
<span class="w">    </span><span class="nv">acertado</span><span class="o">=</span><span class="m">1</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-12-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-12-12-0" name="12-0" role="tab" tabindex="0">piedra_papel_tijera.sh</button><button aria-controls="panel-12-12-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-12-12-1" name="12-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-12-12-0" class="sphinx-tabs-panel" id="panel-12-12-0" name="12-0" role="tabpanel" tabindex="0"><p>Crea un script en Bash llamado <strong>piedra_papel_tijera.sh</strong> que simule el juego de (Piedra, Papel o Tijera) entre dos jugadores durante un número dado de partidas.</p>
<p>Cada jugador debe elegir aleatoriamente entre piedra, papel o tijera. El programa deberá contar cuántas veces gana el Jugador 1, cuántas gana el Jugador 2 y cuántas veces empatan.</p>
<p>La salida debe ser un resumen con los porcentajes de empate, victoria del Jugador 1 y victoria del Jugador 2, con dos cifras decimales de precisión.</p>
<p>Una vez creado el script,  muestra los resultados, como sigue:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">50</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="m">10000</span><span class="w"> </span><span class="m">100000</span><span class="p">;</span>
<span class="k">do</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="k">$(</span>./piedra_papel_tijera.sh<span class="w"> </span><span class="nv">$i</span><span class="k">)</span>
<span class="k">done</span>

<span class="m">10</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">40</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span>.00<span class="w"> </span>%
<span class="m">50</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">36</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">46</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">18</span>.00<span class="w"> </span>%
<span class="m">100</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">31</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">32</span>.00<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">37</span>.00<span class="w"> </span>%
<span class="m">1000</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">34</span>.30<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">34</span>.40<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">31</span>.30<span class="w"> </span>%
<span class="m">10000</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.75<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.01<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.24<span class="w"> </span>%
<span class="m">100000</span><span class="w"> </span><span class="nv">Empate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.30<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.24<span class="w"> </span>%,<span class="w"> </span>Gana<span class="w"> </span><span class="nv">2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">33</span>.44<span class="w"> </span>%
</pre></div>
</div>
</div><div aria-labelledby="tab-12-12-1" class="sphinx-tabs-panel" hidden="true" id="panel-12-12-1" name="12-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">opcion</span><span class="o">=(</span><span class="w"> </span><span class="s2">&quot;piedra&quot;</span><span class="w"> </span><span class="s2">&quot;papel&quot;</span><span class="w"> </span><span class="s2">&quot;tijera&quot;</span><span class="w"> </span><span class="o">)</span>

<span class="nv">contador_gana1</span><span class="o">=</span><span class="m">0</span>
<span class="nv">contador_gana2</span><span class="o">=</span><span class="m">0</span>
<span class="nv">contador_empate</span><span class="o">=</span><span class="m">0</span>
<span class="nv">n_turnos</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">10</span><span class="si">}</span>

<span class="k">for</span><span class="w">  </span><span class="o">((</span><span class="w"> </span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i&lt;<span class="o">=</span>n_turnos<span class="p">;</span><span class="w"> </span>i++<span class="w"> </span><span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">jugador1</span><span class="o">=</span><span class="si">${</span><span class="nv">opcion</span><span class="p">[</span><span class="k">$((</span><span class="nv">$RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">3</span><span class="k">))</span><span class="p">]</span><span class="si">}</span>
<span class="w">  </span><span class="nv">jugador2</span><span class="o">=</span><span class="si">${</span><span class="nv">opcion</span><span class="p">[</span><span class="k">$((</span><span class="nv">$RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">3</span><span class="k">))</span><span class="p">]</span><span class="si">}</span>
<span class="w">  </span><span class="c1">#echo &quot;$jugador1, $jugador2&quot;</span>


<span class="w">  </span><span class="c1">#Empates</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_empate</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_empate</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>


<span class="w">  </span><span class="c1">#Gana 1</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;piedra&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;tijera&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana1</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana1</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;papel&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;piedra&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana1</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana1</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;tijera&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;papel&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana1</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana1</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="c1">#Gana 2</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;piedra&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;tijera&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana2</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana2</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;papel&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;piedra&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana2</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana2</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;tijera&quot;</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$jugador1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;papel&quot;</span><span class="w"> </span><span class="o">]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">contador_gana2</span><span class="o">=</span><span class="k">$((</span><span class="nv">$contador_gana2</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>

<span class="c1">#echo &quot;$contador_empate, $contador_gana1, $contador_gana2&quot;</span>
<span class="nv">port_empate</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2 ; </span><span class="nv">$contador_empate</span><span class="s2">*100/</span><span class="nv">$n_turnos</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nv">port_gana1</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2 ; </span><span class="nv">$contador_gana1</span><span class="s2">*100/</span><span class="nv">$n_turnos</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nv">port_gana2</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2 ; </span><span class="nv">$contador_gana2</span><span class="s2">*100/</span><span class="nv">$n_turnos</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Empate = </span><span class="nv">$port_empate</span><span class="s2"> %,  Gana 1 = </span><span class="nv">$port_gana1</span><span class="s2"> %, Gana 2 = </span><span class="nv">$port_gana2</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-13-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-13-13-0" name="13-0" role="tab" tabindex="0">notas.sh</button><button aria-controls="panel-13-13-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-13-13-1" name="13-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-13-13-0" class="sphinx-tabs-panel" id="panel-13-13-0" name="13-0" role="tabpanel" tabindex="0"><p>Haz un script llamado <strong>notas.sh</strong> que a partir de un fichero donde se recogen las calificaciones de los alumnos en los distintos módulos denominado <a class="reference external" href="https://raw.githubusercontent.com/dgtrabada/dgtrabada.github.io/refs/heads/master/source/so/GNULinux/scripts/calificaciones.txt">calificaciones.txt</a> con el siguiente formato:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Lucía<span class="w"> </span>Sánchez:<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="m">8</span>
María<span class="w"> </span>Vargas:<span class="w"> </span><span class="m">9</span>,<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">7</span>
Lucía<span class="w"> </span>Pérez:<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="m">5</span>,<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">8</span>,<span class="w"> </span><span class="m">4</span>
Miguel<span class="w"> </span>González:<span class="w"> </span><span class="m">9</span>,<span class="w"> </span><span class="m">7</span>,<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">5</span>
Miguel<span class="w"> </span>López:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">9</span>
Elena<span class="w"> </span>García:<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">3</span>,<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">4</span>
Pedro<span class="w"> </span>Torres:<span class="w"> </span><span class="m">6</span>,<span class="w"> </span><span class="m">4</span>,<span class="w"> </span><span class="m">10</span>,<span class="w"> </span><span class="m">9</span>,<span class="w"> </span><span class="m">4</span>
</pre></div>
</div>
<p>Se pide:</p>
<ol class="arabic simple">
<li><p>El número de alumnos matriculados.</p></li>
<li><p>El número de alumnos que han aprobado todos los módulos.</p></li>
<li><p>El número de alumnos que han suspendido sólo un módulo.</p></li>
<li><p>El número de alumnos que han suspendido dos módulo.</p></li>
<li><p>El número de alumnos que han suspendido tres módulos o más.</p></li>
<li><p>Indicar el número de alumnos aprobados/suspensos en porcentaje.</p></li>
</ol>
</div><div aria-labelledby="tab-13-13-1" class="sphinx-tabs-panel" hidden="true" id="panel-13-13-1" name="13-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">archivo</span><span class="o">=</span><span class="s2">&quot;calificaciones.txt&quot;</span>
<span class="nv">todos_aprobados</span><span class="o">=</span><span class="m">0</span>
<span class="nv">un_suspenso</span><span class="o">=</span><span class="m">0</span>
<span class="nv">dos_suspensos</span><span class="o">=</span><span class="m">0</span>
<span class="nv">tres_o_mas_suspensos</span><span class="o">=</span><span class="m">0</span>

<span class="nv">num_alumnos</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i&lt;<span class="o">=</span>num_alumnos<span class="p">;</span><span class="w"> </span>i++<span class="o">))</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">    </span><span class="nv">linea</span><span class="o">=</span><span class="k">$(</span>sed<span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">i</span><span class="si">}</span>p<span class="w"> </span><span class="nv">$archivo</span><span class="k">)</span>
<span class="w">    </span><span class="nv">aprobado_1</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span><span class="nv">aprobado_2</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span><span class="nv">aprobado_3</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span><span class="nv">aprobado_4</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span><span class="nv">aprobado_5</span><span class="o">=</span><span class="m">0</span><span class="w"> </span>
<span class="w">    </span><span class="nv">nota_1</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$linea</span><span class="w"> </span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;,&#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$nota_1</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">aprobado_1</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>

<span class="w">    </span><span class="nv">nota_2</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$linea</span><span class="w"> </span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;,&#39;</span><span class="w"> </span>-f2<span class="k">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$nota_2</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">aprobado_2</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>
<span class="w">   </span>
<span class="w">    </span><span class="nv">nota_3</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$linea</span><span class="w"> </span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;,&#39;</span><span class="w"> </span>-f3<span class="k">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$nota_3</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">aprobado_3</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>

<span class="w">    </span><span class="nv">nota_4</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$linea</span><span class="w"> </span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;,&#39;</span><span class="w"> </span>-f4<span class="k">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$nota_4</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">aprobado_4</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>

<span class="w">    </span><span class="nv">nota_5</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$linea</span><span class="w"> </span><span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="p">|</span>cut<span class="w"> </span>-d<span class="s1">&#39;,&#39;</span><span class="w"> </span>-f5<span class="k">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$nota_5</span><span class="w"> </span>-ge<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nv">aprobado_5</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>
<span class="w">    </span><span class="nv">sum_aprobados</span><span class="o">=</span><span class="k">$((</span><span class="nv">aprobado_1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">aprobado_2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">aprobado_3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">aprobado_4</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">aprobado_5</span><span class="k">))</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$sum_aprobados</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w">  </span><span class="k">then</span><span class="w">  </span><span class="nv">todos_aprobados</span><span class="o">=</span><span class="k">$((</span><span class="nv">todos_aprobados</span><span class="o">+</span><span class="m">1</span><span class="k">))</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="k">fi</span><span class="w">   </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$sum_aprobados</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w">  </span><span class="k">then</span><span class="w">  </span><span class="nv">un_suspenso</span><span class="o">=</span><span class="k">$((</span><span class="nv">un_suspenso</span><span class="o">+</span><span class="m">1</span><span class="k">))</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="k">fi</span><span class="w">   </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$sum_aprobados</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w">  </span><span class="k">then</span><span class="w">  </span><span class="nv">dos_suspensos</span><span class="o">=</span><span class="k">$((</span><span class="nv">dos_suspensos</span><span class="o">+</span><span class="m">1</span><span class="k">))</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="k">fi</span><span class="w">   </span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$sum_aprobados</span><span class="w"> </span>-lt<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w">  </span><span class="k">then</span><span class="w">  </span><span class="nv">tres_o_mas_suspensos</span><span class="o">=</span><span class="k">$((</span><span class="nv">tres_o_mas_suspensos</span><span class="o">+</span><span class="m">1</span><span class="k">))</span><span class="w"> </span><span class="p">;</span><span class="w">    </span><span class="k">fi</span><span class="w">   </span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$linea</span><span class="s2"> : \033[32m</span><span class="nv">$sum_aprobados</span><span class="s2"> \033[0mmod. aprobados &quot;</span>

<span class="k">done</span>

<span class="nv">porcentaje_aprobados</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; (</span><span class="nv">$todos_aprobados</span><span class="s2"> / </span><span class="nv">$num_alumnos</span><span class="s2">) * 100&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>
<span class="nv">porcentaje_suspensos</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;scale=2; ((</span><span class="nv">$num_alumnos</span><span class="s2">-</span><span class="nv">$todos_aprobados</span><span class="s2">) / </span><span class="nv">$num_alumnos</span><span class="s2">) * 100&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="k">)</span>

<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m-------------- Resultados ---------------- \033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Número total de alumnos matriculados:\033[32m </span><span class="nv">$num_alumnos</span><span class="s2"> \033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Número de alumnos que han aprobado todos los módulos:\033[32m </span><span class="nv">$todos_aprobados</span><span class="s2">\033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Número de alumnos que han suspendido solo un módulo:\033[32m </span><span class="nv">$un_suspenso</span><span class="s2">\033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Número de alumnos que han suspendido dos módulos:\033[32m </span><span class="nv">$dos_suspensos</span><span class="s2">\033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Número de alumnos que han suspendido tres módulos o más:\033[32m </span><span class="nv">$tres_o_mas_suspensos</span><span class="s2">\033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Porcentaje de alumnos aprobados:\033[35m  </span><span class="nv">$porcentaje_aprobados</span><span class="s2"> %\033[0m&quot;</span>
<span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;Porcentaje de alumnos suspensos:\033[35m  </span><span class="nv">$porcentaje_suspensos</span><span class="s2"> %\033[0m&quot;</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-14-14-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-14-14-0" name="14-0" role="tab" tabindex="0">analizar_cal.sh</button><button aria-controls="panel-14-14-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-14-14-1" name="14-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-14-14-0" class="sphinx-tabs-panel" id="panel-14-14-0" name="14-0" role="tabpanel" tabindex="0"><p>Descarga el archivo <a class="reference external" href="https://raw.githubusercontent.com/dgtrabada/dgtrabada.github.io/refs/heads/master/source/so/GNULinux/scripts/calendario.dat">calendario.dat</a>, encontrara 543 citas donde el primer campo es el mes, el segundo campo es el día, el tercer campo es la hora y el cuarto la cita</p>
<p>Crea una script llamado <strong>analizar_cal.sh</strong> que considere las siguientes entradas:</p>
<ul>
<li><p>Muestra un mensaje de ayuda</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analizar_cal.sh<span class="w"> </span>--help
salida:
Uso<span class="w"> </span>:<span class="w"> </span>analizar<span class="w"> </span><span class="o">[</span>OPCION<span class="o">]</span>
Options:
-<span class="w"> </span>mes<span class="w"> </span>&lt;mes&gt;<span class="w">  </span>muestra<span class="w"> </span>el<span class="w"> </span>número<span class="w"> </span>de<span class="w"> </span>citas<span class="w"> </span>que<span class="w"> </span>hay<span class="w"> </span>en<span class="w"> </span>un<span class="w"> </span>mes
-<span class="w"> </span>d<span class="w"> </span>&lt;día&gt;<span class="w"> </span>muestra<span class="w"> </span>el<span class="w"> </span>numero<span class="w"> </span>de<span class="w"> </span>citas<span class="w"> </span>que<span class="w"> </span>hay<span class="w"> </span>para<span class="w"> </span>ese<span class="w"> </span>día<span class="w"> </span>para<span class="w"> </span>todos<span class="w"> </span>los<span class="w"> </span>meses
</pre></div>
</div>
</li>
<li><p>En el caso de no dar ninguna entrada tambien mostrará el mensaje de ayuda</p></li>
<li><p>Muestra el número de citas que hay por mes</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analizar_cal.sh<span class="w"> </span>-mes<span class="w"> </span>Julio
<span class="m">39</span>
</pre></div>
</div>
</li>
<li><p>Muestra el número de citas que hay por un determinado día para todos los meses</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analizar_cal.sh<span class="w"> </span>-d<span class="w"> </span><span class="m">4</span>
<span class="m">11</span>
</pre></div>
</div>
</li>
<li><p>Muestra el número de citas que se han producido durante todo el año de forma ordenada</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analizar_cal.sh<span class="w"> </span>-resumen<span class="w"> </span>citas<span class="w"> </span><span class="p">|</span><span class="w"> </span>head
<span class="m">23</span><span class="w"> </span>Reunión<span class="w"> </span>de<span class="w"> </span>trabajo.
<span class="m">16</span><span class="w"> </span>Cita<span class="w"> </span>con<span class="w"> </span>el<span class="w"> </span>médico.
<span class="m">14</span><span class="w"> </span>Llamada<span class="w"> </span>con<span class="w"> </span>un<span class="w"> </span>cliente.
<span class="m">14</span><span class="w"> </span>Entrega<span class="w"> </span>de<span class="w"> </span>proyectos.
<span class="m">14</span><span class="w"> </span>Cumpleaños<span class="w"> </span>de<span class="w"> </span>un<span class="w"> </span>amigo.
<span class="m">14</span><span class="w"> </span>Clase<span class="w"> </span>de<span class="w"> </span>yoga<span class="w"> </span>o<span class="w"> </span>ejercicio.
<span class="m">14</span><span class="w"> </span>Cena<span class="w"> </span>con<span class="w"> </span>amigos.
<span class="m">14</span><span class="w"> </span>Aniversario<span class="w"> </span>de<span class="w"> </span>boda.
<span class="m">13</span><span class="w"> </span>Conferencia<span class="w"> </span>o<span class="w"> </span>seminario.
<span class="m">10</span><span class="w"> </span>Visita<span class="w"> </span>al<span class="w"> </span>dentista.
</pre></div>
</div>
</li>
<li><p>Muestra el numero de citas que hay por diferentes franjas horarias</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./analizar_cal.sh<span class="w"> </span>-resumen<span class="w"> </span>horas
De<span class="w"> </span><span class="m">10</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">87</span><span class="w"> </span>citas
De<span class="w"> </span><span class="m">11</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">80</span><span class="w"> </span>citas
De<span class="w"> </span><span class="m">12</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">99</span><span class="w"> </span>citas
De<span class="w"> </span><span class="m">13</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">97</span><span class="w"> </span>citas
De<span class="w"> </span><span class="m">14</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">79</span><span class="w"> </span>citas
De<span class="w"> </span><span class="m">15</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="m">101</span><span class="w"> </span>citas
</pre></div>
</div>
</li>
</ul>
</div><div aria-labelledby="tab-14-14-1" class="sphinx-tabs-panel" hidden="true" id="panel-14-14-1" name="14-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Uso : analizar [OPCION]&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Options:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;- mes &lt;mes&gt; muestra el numero de citas que hay en un mes&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;- d &lt;dia&gt; muestra el numero de citas que hay para ese dia para todos los meses&quot;</span>
<span class="o">}</span>
<span class="nv">archivo</span><span class="o">=</span>calendario.dat

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;--help&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>show_help
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-mes&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-d&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w">  </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot; </span><span class="nv">$2</span><span class="s2"> &quot;</span><span class="w">         </span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-resumen&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>citas<span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f4-<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w">  </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-r
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>horas<span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nv">hora</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f3<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f3<span class="k">)</span>
<span class="w">      </span><span class="nv">c</span><span class="o">=</span><span class="m">0</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$hora</span>
<span class="w">      </span><span class="k">do</span>
<span class="w">        </span><span class="nv">c</span><span class="o">=</span><span class="k">$((</span><span class="nv">c</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">        </span><span class="nv">cita</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f3<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$i</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f2<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-<span class="nv">$c</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>De<span class="w"> </span><span class="nv">$i</span>:00-10:59<span class="w"> </span>hay<span class="w"> </span><span class="nv">$cita</span><span class="w"> </span>citas
<span class="w">      </span><span class="k">done</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">else</span>
<span class="w"> </span>show_help
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-15-15-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-15-15-0" name="15-0" role="tab" tabindex="0">rep.sh</button><button aria-controls="panel-15-15-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-15-15-1" name="15-1" role="tab" tabindex="-1">Solución</button><button aria-controls="panel-15-15-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-15-15-2" name="15-2" role="tab" tabindex="-1">Solución (array)</button></div><div aria-labelledby="tab-15-15-0" class="sphinx-tabs-panel" id="panel-15-15-0" name="15-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>rep.sh</strong> que diga el numero de veces que estan repetidos los siguientes nombres del archivo <a class="reference external" href="https://raw.githubusercontent.com/dgtrabada/dgtrabada.github.io/refs/heads/master/source/so/GNULinux/scripts/nombres.dat">nombres.dat</a></p>
</div><div aria-labelledby="tab-15-15-1" class="sphinx-tabs-panel" hidden="true" id="panel-15-15-1" name="15-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

sort<span class="w"> </span>nombres.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-nr<span class="w"> </span>
</pre></div>
</div>
</div><div aria-labelledby="tab-15-15-2" class="sphinx-tabs-panel" hidden="true" id="panel-15-15-2" name="15-2" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">nlineas</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span>nombres.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w">  </span>
<span class="w">  </span>A<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="k">$(</span>head<span class="w"> </span>-<span class="nv">$i</span><span class="w"> </span>nombres.dat<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span>
<span class="k">done</span>

<span class="nv">count</span><span class="o">=</span><span class="m">0</span>
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="nv">$nlineas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span><span class="nv">encontrado</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span><span class="k">for</span><span class="o">((</span><span class="nv">j</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>j&lt;<span class="o">=</span><span class="si">${#</span><span class="nv">B</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>j++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="si">${</span><span class="nv">B</span><span class="p">[j]</span><span class="si">}</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="si">${</span><span class="nv">A</span><span class="p">[i]</span><span class="si">}</span><span class="w"> </span><span class="o">]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nv">encontrado</span><span class="o">=</span><span class="m">1</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">done</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$encontrado</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">count</span><span class="o">=</span><span class="k">$((</span><span class="nv">count</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">    </span>B<span class="o">[</span><span class="nv">$count</span><span class="o">]=</span><span class="si">${</span><span class="nv">A</span><span class="p">[i]</span><span class="si">}</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>


<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="si">${#</span><span class="nv">B</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w"> </span>
<span class="w">  </span>C<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="m">0</span>
<span class="w">  </span><span class="k">for</span><span class="o">((</span><span class="nv">j</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>j&lt;<span class="o">=</span><span class="si">${#</span><span class="nv">A</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>j++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="si">${</span><span class="nv">B</span><span class="p">[i]</span><span class="si">}</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="si">${</span><span class="nv">A</span><span class="p">[j]</span><span class="si">}</span><span class="w"> </span><span class="o">]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">       </span>C<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="k">$((</span><span class="si">${</span><span class="nv">C</span><span class="p">[i]</span><span class="si">}</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">done</span>
<span class="k">done</span>


<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="si">${#</span><span class="nv">B</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span><span class="w">  </span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">C</span><span class="p">[i]</span><span class="si">}</span><span class="s2"> </span><span class="si">${</span><span class="nv">B</span><span class="p">[i]</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">done</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rn
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-16-16-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-16-16-0" name="16-0" role="tab" tabindex="0">monedas.sh</button><button aria-controls="panel-16-16-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-16-16-1" name="16-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-16-16-0" class="sphinx-tabs-panel" id="panel-16-16-0" name="16-0" role="tabpanel" tabindex="0"><p>Sube al curso un script llamado  <strong>monedas.sh</strong> que tire tres monedas y escriba en un archivo el resultado.</p>
<p>Haz que lea el archivo y obtenga el porcentaje de veces que salen 3 caras.</p>
<p>En el caso de que no se proporcione el número de tiradas ni el archivo, tomara por defecto el archivo llamado tiradas.dat y hará 100 tiradas.</p>
<p>En el caso de que no encuntre el archivo cuando lo va a leer, tomara por defecto monedas.dat, si este no existe, mostrará que no existe.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./monedas.sh<span class="w"> </span>-help
-n<span class="w"> </span>&lt;tiradas&gt;<span class="w"> </span>&lt;archivo&gt;
-read<span class="w"> </span>&lt;archivo&gt;
</pre></div>
</div>
</div><div aria-labelledby="tab-16-16-1" class="sphinx-tabs-panel" hidden="true" id="panel-16-16-1" name="16-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m -help\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m -n &lt;tiradas&gt; &lt;archivo&gt; \033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m -read &lt;archivo&gt; \033[0m&quot;</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-help&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span>show_help
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-n&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nv">tiradas</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">100</span><span class="si">}</span>
<span class="w">  </span><span class="nv">outfile</span><span class="o">=</span><span class="si">${</span><span class="nv">3</span><span class="k">:-</span><span class="nv">monedas</span><span class="p">.dat</span><span class="si">}</span>
<span class="w">  </span><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="nv">$tiradas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="k">))</span><span class="w"> </span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="k">))</span><span class="w"> </span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">2</span><span class="k">))</span>
<span class="w">  </span><span class="k">done</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$outfile</span>
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-read&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nv">readfile</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">monedas</span><span class="p">.dat</span><span class="si">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$readfile</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m Leemos el archivo </span><span class="nv">$readfile</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="nv">tres_caras</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;1 1 1&#39;</span><span class="w"> </span><span class="nv">$readfile</span><span class="k">)</span>
<span class="w">    </span><span class="nv">n_total</span><span class="o">=</span><span class="k">$(</span>wc<span class="w"> </span>-l<span class="w"> </span><span class="nv">$readfile</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[33m Tenemos </span><span class="k">$((</span><span class="nv">tres_caras</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">n_total</span><span class="k">))</span><span class="s2">%  de tiradas con tres caras \033[0m&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El archivo </span><span class="nv">$readfile</span><span class="s2"> no existe\033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-17-17-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-17-17-0" name="17-0" role="tab" tabindex="0">ip.sh</button><button aria-controls="panel-17-17-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-17-17-1" name="17-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-17-17-0" class="sphinx-tabs-panel" id="panel-17-17-0" name="17-0" role="tabpanel" tabindex="0"><p>Crea un script en Bash llamado <strong>ips.sh</strong> que cumpla con los siguientes requisitos:</p>
<p>Si ejecutas el script con <code class="docutils literal notranslate"><span class="pre">./ips.sh</span> <span class="pre">-help</span></code>, debe mostrar la siguiente ayuda:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>-help<span class="w">                         </span>:<span class="w"> </span>muestra<span class="w"> </span>la<span class="w"> </span>ayuda
-file<span class="w"> </span>&lt;archivo&gt;<span class="w"> </span>&lt;número_ips&gt;<span class="w">  </span>:<span class="w"> </span>Crea<span class="w"> </span>un<span class="w"> </span>archivo<span class="w"> </span>llamado<span class="w"> </span>&lt;archivo&gt;<span class="w"> </span>con<span class="w"> </span>&lt;número_ips&gt;.
-find<span class="w"> </span>&lt;archivo&gt;<span class="w"> </span>&lt;ip&gt;<span class="w">          </span>:<span class="w"> </span>Muestra<span class="w"> </span>cuantas<span class="w"> </span>veces<span class="w"> </span>aparece<span class="w"> </span>la<span class="w"> </span>&lt;ip&gt;
-read<span class="w"> </span>&lt;archivo&gt;<span class="w">               </span>:<span class="w"> </span>Muestra<span class="w"> </span>de<span class="w"> </span>forma<span class="w"> </span>ordenada<span class="w"> </span>las<span class="w"> </span>IPs<span class="w"> </span>por<span class="w"> </span>número<span class="w"> </span>de<span class="w"> </span>conexiones
</pre></div>
</div>
<ul class="simple">
<li><p>Si ejecutas el script sin argumentos ./ips.sh, también debe mostrar la ayuda.</p></li>
<li><p>Si ejecutas el ./ips.sh -file sin indicar el &lt;número_ips&gt; tomara por defecto 50, en el caso de no darle el &lt;archivo&gt; tomará por defecto ip.dat.  Cada línea tendrá una IP aleatoria dentro del rango 192.168.2.0/28. La primera IP utilizable es 192.168.2.1 y la última es 192.168.2.14.</p></li>
<li><p>Si ejecutas el ./ips.sh -find lee el &lt;archivo&gt;, si no existe o no se le indica, mostrará por pantalla «El archivo no existe», en el caso de que no se proporcione &lt;ip&gt; mostrará por pantalla «Proporcionar ip»</p></li>
<li><p>Si ejecutas el ./ips.sh -read lee el &lt;archivo&gt;, si no existe o no se le indica, mostrará por pantalla «El archivo no existe»</p></li>
</ul>
</div><div aria-labelledby="tab-17-17-1" class="sphinx-tabs-panel" hidden="true" id="panel-17-17-1" name="17-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m-help                         : muestra la ayuda\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m-file &lt;archivo&gt; &lt;número_ips&gt;  : Crea un archivo llamado &lt;archivo&gt; con &lt;número_ips&gt;  \033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m-find &lt;archivo&gt; &lt;ip&gt;          : Muestra cuantas veces aparece la &lt;ip&gt;  \033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m-read &lt;archivo&gt;               : Muestra de forma ordenada las IPs por número de conexiones  \033[0m&quot;</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-help&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span>show_help
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span>show_help
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-file&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nv">tiradas</span><span class="o">=</span><span class="si">${</span><span class="nv">3</span><span class="k">:-</span><span class="nv">50</span><span class="si">}</span>
<span class="w">  </span><span class="nv">outfile</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">ip</span><span class="p">.dat</span><span class="si">}</span>
<span class="w">  </span><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="nv">$tiradas</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="m">192</span>.168.2.<span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="k">done</span><span class="w"> </span>&gt;<span class="w"> </span><span class="nv">$outfile</span>
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-find&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nv">readfile</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">  </span><span class="nv">ip</span><span class="o">=</span><span class="nv">$3</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$3</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m Proporcionar ip\033[0m&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$readfile</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m Leemos el archivo </span><span class="nv">$readfile</span><span class="s2"> \033[0m&quot;</span>
<span class="w">      </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$ip</span><span class="w"> </span><span class="nv">$readfile</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El archivo </span><span class="nv">$readfile</span><span class="s2"> no existe\033[0m&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;-read&#39;</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nv">readfile</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-f<span class="w"> </span><span class="nv">$readfile</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[32m Leemos el archivo </span><span class="nv">$readfile</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span>cat<span class="w"> </span><span class="nv">$readfile</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rn
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El archivo </span><span class="nv">$readfile</span><span class="s2"> no existe\033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-18-18-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-18-18-0" name="18-0" role="tab" tabindex="0">dados.sh</button><button aria-controls="panel-18-18-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-18-18-1" name="18-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-18-18-0" class="sphinx-tabs-panel" id="panel-18-18-0" name="18-0" role="tabpanel" tabindex="0"><p>Sube al curso un script llamado  <strong>dados.sh</strong> que obtenga dos números aleatorios entre el 1 y el 6, obtén la suma de los dos dados, Haz que salga por pantalla el numero de tiradas y el porcentaje de veces que sale cada una.</p>
<p>Haz que el número de tiradas lo reciba como un argumento,  el caso de que no reciba ningún argumento haz que haga 1000 tiradas</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./dados.sh
De<span class="w"> </span><span class="m">1000</span><span class="w"> </span>tiradas<span class="w"> </span>:<span class="w"> </span><span class="m">2</span><span class="o">(</span><span class="m">1</span>%<span class="o">)</span><span class="w"> </span><span class="m">3</span><span class="o">(</span><span class="m">7</span>%<span class="o">)</span><span class="w"> </span><span class="m">4</span><span class="o">(</span><span class="m">10</span>%<span class="o">)</span><span class="w"> </span><span class="m">5</span><span class="o">(</span><span class="m">12</span>%<span class="o">)</span><span class="w"> </span><span class="m">6</span><span class="o">(</span><span class="m">14</span>%<span class="o">)</span><span class="w"> </span><span class="m">7</span><span class="o">(</span><span class="m">17</span>%<span class="o">)</span><span class="w"> </span><span class="m">8</span><span class="o">(</span><span class="m">14</span>%<span class="o">)</span><span class="w"> </span><span class="m">9</span><span class="o">(</span><span class="m">12</span>%<span class="o">)</span><span class="w"> </span><span class="m">10</span><span class="o">(</span><span class="m">10</span>%<span class="o">)</span><span class="w"> </span><span class="m">11</span><span class="o">(</span><span class="m">7</span>%<span class="o">)</span><span class="w"> </span><span class="m">12</span><span class="o">(</span><span class="m">1</span>%<span class="o">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-18-18-1" class="sphinx-tabs-panel" hidden="true" id="panel-18-18-1" name="18-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">tiradas</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">1000</span><span class="si">}</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span>frecuencias<span class="o">[</span><span class="nv">$i</span><span class="o">]=</span><span class="m">0</span>
<span class="k">done</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span>tiradas<span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nv">dado1</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="nv">dado2</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="nv">suma</span><span class="o">=</span><span class="k">$((</span><span class="nv">dado1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">dado2</span><span class="k">))</span>
<span class="w">  </span>frecuencias<span class="o">[</span><span class="nv">$suma</span><span class="o">]=</span><span class="k">$((</span><span class="nv">frecuencias</span><span class="o">[</span><span class="nv">$suma</span><span class="o">]+</span><span class="m">1</span><span class="k">))</span>
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;De </span><span class="nv">$tiradas</span><span class="s2"> tiradas:&quot;</span>
<span class="nv">output</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span>&lt;<span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nv">porcentaje</span><span class="o">=</span><span class="k">$((</span><span class="nv">frecuencias</span><span class="o">[</span><span class="nv">$i</span><span class="o">]</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">100</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nv">tiradas</span><span class="k">))</span>
<span class="w">  </span><span class="nv">output</span><span class="o">+=</span><span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">(</span><span class="si">${</span><span class="nv">porcentaje</span><span class="si">}</span><span class="s2">%) &quot;</span>
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output</span><span class="s2">&quot;</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-19-19-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-19-19-0" name="19-0" role="tab" tabindex="0">adivina_cpu.sh</button><button aria-controls="panel-19-19-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-19-19-1" name="19-1" role="tab" tabindex="-1">Solución</button><button aria-controls="panel-19-19-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-19-19-2" name="19-2" role="tab" tabindex="-1">Test</button></div><div aria-labelledby="tab-19-19-0" class="sphinx-tabs-panel" id="panel-19-19-0" name="19-0" role="tabpanel" tabindex="0"><p>Crea un script en Bash llamado <strong>adivina_cpu.sh</strong> que simule un juego automático de adivinanza en el que la CPU intenta adivinar un número secreto aleatorio, generado al inicio del programa. El número estará comprendido entre 1 y un valor máximo definido por la variable n_max_adivinar. En cada intento, la CPU elige otro número al azar dentro del rango posible, ajustando los límites mínimo y máximo según si el número es menor o mayor al número secreto.</p>
<p>El script debe cumplir con los siguientes requisitos:</p>
<ul class="simple">
<li><p>No se deben repetir los números ya probados.</p></li>
<li><p>Tras cada intento, si el número elegido es menor que el número secreto, se actualiza el mínimo.</p></li>
<li><p>Si el número elegido es mayor, se actualiza el máximo.</p></li>
<li><p>El proceso se repite hasta que se adivine el número secreto.</p></li>
<li><p>Al final, se muestra el número total de intentos que necesitó la CPU para adivinar el número.</p></li>
</ul>
<p>Cuando el usuario acierte haz que muestre el número de intentos.</p>
</div><div aria-labelledby="tab-19-19-1" class="sphinx-tabs-panel" hidden="true" id="panel-19-19-1" name="19-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">n_max_adivinar</span><span class="o">=</span><span class="m">20</span>
<span class="nv">numero_secreto</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="nv">$n_max_adivinar</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="k">))</span>
<span class="nv">intento</span><span class="o">=</span><span class="m">0</span>
<span class="nv">comparar</span><span class="o">=</span>-1

<span class="nv">maximo</span><span class="o">=</span><span class="nv">$n_max_adivinar</span>
<span class="nv">minimo</span><span class="o">=</span><span class="m">0</span>

<span class="k">while</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$comparar</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">intento</span><span class="o">=</span><span class="k">$((</span><span class="nv">intento</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span><span class="nv">numero_elegido</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="k">$((</span><span class="nv">maximo</span><span class="o">-</span><span class="nv">minimo</span><span class="k">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$minimo</span><span class="k">))</span>
<span class="w">  </span><span class="nv">repetido</span><span class="o">=</span><span class="m">1</span>
<span class="w">  </span><span class="k">while</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$repetido</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">do</span>
<span class="w">    </span><span class="nv">repetido</span><span class="o">=</span><span class="m">0</span>
<span class="w">    </span><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="o">=</span><span class="si">${#</span><span class="nv">I</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>i++<span class="o">))</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w">  </span><span class="si">${</span><span class="nv">I</span><span class="p">[</span><span class="nv">$i</span><span class="p">]</span><span class="si">}</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$numero_elegido</span><span class="w"> </span><span class="o">]]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nv">repetido</span><span class="o">=</span><span class="m">1</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$repetido</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">       </span><span class="nv">numero_elegido</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="k">$((</span><span class="nv">maximo</span><span class="o">-</span><span class="nv">minimo</span><span class="k">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">$minimo</span><span class="k">))</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">done</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$numero_elegido</span><span class="w"> </span>-lt<span class="w"> </span><span class="nv">$numero_secreto</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">comparar</span><span class="o">=</span>-1
<span class="w">    </span><span class="nv">minimo</span><span class="o">=</span><span class="nv">$numero_elegido</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$numero_elegido</span><span class="w"> </span>-gt<span class="w"> </span><span class="nv">$numero_secreto</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">comparar</span><span class="o">=</span><span class="m">1</span>
<span class="w">    </span><span class="nv">maximo</span><span class="o">=</span><span class="nv">$numero_elegido</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$numero_elegido</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$numero_secreto</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">comparar</span><span class="o">=</span><span class="m">0</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="c1">#echo $intento $numero_secreto  $numero_elegido  $comparar $maximo $minimo $repetido</span>
<span class="w">  </span>I<span class="o">[</span><span class="nv">$intento</span><span class="o">]=</span><span class="nv">$numero_elegido</span>
<span class="k">done</span>
<span class="c1">#sacamos el número de intentos que ha hecho hasta adividnar el resultado</span>
<span class="nb">echo</span><span class="w"> </span><span class="nv">$intento</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-19-19-2" class="sphinx-tabs-panel" hidden="true" id="panel-19-19-2" name="19-2" role="tabpanel" tabindex="0"><p>Para testearlo puedes usar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ntot</span><span class="o">=</span><span class="m">100</span>
<span class="nv">sum</span><span class="o">=</span><span class="m">0</span>
<span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="nv">$ntot</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">n</span><span class="o">=</span><span class="k">$(</span>./adivina_cpu.sh<span class="k">)</span>
<span class="w">  </span><span class="nv">sum</span><span class="o">=</span><span class="k">$((</span><span class="nv">sum</span><span class="o">+</span><span class="nv">n</span><span class="k">))</span>
<span class="k">done</span>
<span class="nv">resultado</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;1/(</span><span class="nv">$sum</span><span class="s2">/</span><span class="nv">$ntot</span><span class="s2">)&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>bc<span class="w"> </span>-l<span class="k">)</span>
<span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%.2f\n&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$resultado</span><span class="s2">&quot;</span>
<span class="m">0</span>.23
</pre></div>
</div>
<p>Como se puede ver, la probabilidad de acertar el número se incrementa notablemente gracias a dos factores clave del algoritmo: evitar repetir números y ajustar dinámicamente los valores máximo y mínimo tras cada intento.</p>
<p>Si no se evitaran los números repetidos y no se acotara el intervalo con el mínimo y el máximo, cada intento sería completamente aleatorio dentro del rango total (por ejemplo, del 1 al 20). En ese caso, la probabilidad de acertar en un intento sería simplemente: 1/20=0.05 es decir, solo un 5% de probabilidad frente al 23%</p>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-20-20-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-20-20-0" name="20-0" role="tab" tabindex="0">tragaperras.sh</button><button aria-controls="panel-20-20-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-20-20-1" name="20-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-20-20-0" class="sphinx-tabs-panel" id="panel-20-20-0" name="20-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>tragaperras.sh</strong> que simule una máquina tragaperras con tres rodillos. Cada rodillo muestra un número aleatorio del 0 al 9. Las reglas del juego son las siguientes:</p>
<p>Cada partida cuesta 1 moneda.</p>
<ul class="simple">
<li><p>Si aparecen dos números iguales, el jugador gana 2 monedas.</p></li>
<li><p>Si aparecen tres números iguales, el jugador gana 3 monedas.</p></li>
<li><p>Si los tres números son 7, el jugador gana 10 monedas.</p></li>
</ul>
<p>El programa debe simular una cantidad significativa de partidas y calcular:</p>
<ul class="simple">
<li><p>El número total de monedas ganadas.</p></li>
<li><p>El número total de monedas gastadas.</p></li>
<li><p>El balance final.</p></li>
</ul>
<p>Y, finalmente, responder a la pregunta: ¿Es rentable esta tragaperras para el jugador?</p>
<p>Haz que el número de tiradas lo reciba como un argumento,  el caso de que no reciba ningún argumento haz que haga 1000 tiradas</p>
</div><div aria-labelledby="tab-20-20-1" class="sphinx-tabs-panel" hidden="true" id="panel-20-20-1" name="20-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="nv">tiradas</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">10000</span><span class="si">}</span>
<span class="nv">ganadas</span><span class="o">=</span><span class="m">0</span>
<span class="nv">gastadas</span><span class="o">=</span><span class="m">0</span>

<span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i&lt;<span class="o">=</span>tiradas<span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="nv">gastadas</span><span class="o">=</span><span class="k">$((</span><span class="nv">gastadas</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">  </span>
<span class="w">  </span><span class="c1">#generamos cada rodillo</span>
<span class="w">  </span><span class="nv">r1</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">10</span><span class="k">))</span>
<span class="w">  </span><span class="nv">r2</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">10</span><span class="k">))</span>
<span class="w">  </span><span class="nv">r3</span><span class="o">=</span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">10</span><span class="k">))</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$r1</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$r2</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="nv">$r2</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$r3</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$r1</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="c1">#caso de 777</span>
<span class="w">      </span><span class="nv">ganadas</span><span class="o">=</span><span class="k">$((</span><span class="nv">ganadas</span><span class="o">+</span><span class="m">10</span><span class="k">))</span>
<span class="w">    </span><span class="k">else</span><span class="w">                     </span><span class="c1">#caso 3 iguales sin contar el 777</span>
<span class="w">      </span><span class="nv">ganadas</span><span class="o">=</span><span class="k">$((</span><span class="nv">ganadas</span><span class="o">+</span><span class="m">3</span><span class="k">))</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">elif</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$r1</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$r2</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">$r1</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$r3</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="nv">$r2</span><span class="w"> </span>-eq<span class="w"> </span><span class="nv">$r3</span><span class="w"> </span><span class="o">]]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="c1">#caso 2 iguales sin contar 3 iguales</span>
<span class="w">    </span><span class="nv">ganadas</span><span class="o">=</span><span class="k">$((</span><span class="nv">ganadas</span><span class="o">+</span><span class="m">2</span><span class="k">))</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Tiradas realizadas: </span><span class="nv">$tiradas</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Monedas gastadas:   </span><span class="nv">$gastadas</span><span class="s2">&quot;</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Monedas ganadas:    </span><span class="nv">$ganadas</span><span class="s2">&quot;</span>

<span class="nv">balance</span><span class="o">=</span><span class="k">$((</span><span class="nv">ganadas</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">gastadas</span><span class="k">))</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Balance final:      </span><span class="nv">$balance</span><span class="s2">&quot;</span>

<span class="k">if</span><span class="w"> </span><span class="o">((</span>balance<span class="w"> </span>&gt;<span class="w"> </span><span class="m">0</span><span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Esta tragaperras ES rentable para el jugador.&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Esta tragaperras NO es rentable para el jugador.&quot;</span>
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<section id="gestion-de-usuarios-locales">
<h2>Gestión de usuarios locales<a class="headerlink" href="#gestion-de-usuarios-locales" title="Link to this heading">#</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-21-21-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-21-21-0" name="21-0" role="tab" tabindex="0">usuarios_WSL.sh</button><button aria-controls="panel-21-21-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-21-21-1" name="21-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-21-21-0" class="sphinx-tabs-panel" id="panel-21-21-0" name="21-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>usuarios_WSL.sh</strong>, que cumpla las siguientes condiciones:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./usuarios_WSL.sh<span class="w"> </span>-help
<span class="w">  </span>-help<span class="w">               </span>Mostrar<span class="w"> </span>esta<span class="w"> </span>ayuda.
<span class="w">  </span>-crear<span class="w"> </span>&lt;N&gt;<span class="w">          </span>Crear<span class="w"> </span>N<span class="w"> </span>usuarios<span class="w"> </span>de<span class="w"> </span>forma<span class="w"> </span>aleatoria<span class="w"> </span>dentro<span class="w"> </span>de<span class="w"> </span>los<span class="w"> </span>grupos<span class="w"> </span>X,<span class="w"> </span>Y<span class="w"> </span>o<span class="w"> </span>Z.
<span class="w">  </span>-borrar<span class="w">             </span>Borrar<span class="w"> </span>todos<span class="w"> </span>los<span class="w"> </span>usuarios<span class="w"> </span>creados<span class="w"> </span>por<span class="w"> </span>este<span class="w"> </span>script.
<span class="w">  </span>-listar<span class="w">             </span>Mostrar<span class="w"> </span>los<span class="w"> </span>usuarios<span class="w"> </span>por<span class="w"> </span>grupo<span class="w"> </span>creados<span class="w"> </span>por<span class="w"> </span>este<span class="w"> </span>script.
</pre></div>
</div>
<p>Opción <code class="docutils literal notranslate"><span class="pre">-crear</span> <span class="pre">&lt;N&gt;</span></code>: Creará N usuarios con nombres generados automáticamente con el siguiente formato: uX01, uY23, uZ15, etc.,</p>
<ul class="simple">
<li><p>La letra (X, Y o Z) corresponde a un grupo al que se asignará el usuario.</p></li>
<li><p>El número es un sufijo aleatorio de dos cifras (01 a 99).</p></li>
<li><p>Si no tenemos &lt;N&gt; creará por defecto 10 usuarios</p></li>
</ul>
</div><div aria-labelledby="tab-21-21-1" class="sphinx-tabs-panel" hidden="true" id="panel-21-21-1" name="21-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;</span>
<span class="s1">  -help               Mostrar esta ayuda.</span>
<span class="s1">  -crear &lt;N&gt;          Crear N usuarios de forma aleatoria dentro de los grupos X, Y o Z.</span>
<span class="s1">  -borrar             Borrar todos los usuarios creados por este script.</span>
<span class="s1">  -listar             Mostrar los usuarios por grupo creados por este script.</span>
<span class="s1">&#39;</span>
<span class="o">}</span>

<span class="nv">grupos</span><span class="o">=(</span>X<span class="w"> </span>Y<span class="w"> </span>Z<span class="o">)</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-help&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>show_help
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-crear&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">num_usuarios</span><span class="o">=</span><span class="si">${</span><span class="nv">2</span><span class="k">:-</span><span class="nv">10</span><span class="si">}</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span>i&lt;<span class="o">=</span>num_usuarios<span class="p">;</span><span class="w"> </span>i++<span class="o">))</span><span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">      </span><span class="nv">grupo</span><span class="o">=</span><span class="si">${</span><span class="nv">grupos</span><span class="p">[</span><span class="nv">$RANDOM</span><span class="p"> % </span><span class="si">${#</span><span class="nv">grupos</span><span class="p">[@]</span><span class="si">}</span><span class="p">]</span><span class="si">}</span>
<span class="w">      </span><span class="nv">sufijo</span><span class="o">=</span><span class="k">$(</span><span class="nb">printf</span><span class="w"> </span><span class="s2">&quot;%02d&quot;</span><span class="w"> </span><span class="k">$((</span><span class="nv">RANDOM</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="m">99</span><span class="w"> </span><span class="k">)))</span>
<span class="w">      </span><span class="nv">usuario</span><span class="o">=</span><span class="s2">&quot;u</span><span class="si">${</span><span class="nv">grupo</span><span class="si">}${</span><span class="nv">sufijo</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="w">      </span>useradd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>-d<span class="w"> </span>/home/<span class="nv">$usuario</span><span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span><span class="w"> </span>mkpasswd<span class="w"> </span>-m<span class="w"> </span>sha-512<span class="w"> </span>-s<span class="w"> </span>cambiame<span class="k">)</span><span class="w"> </span><span class="nv">$usuario</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Usuario </span><span class="nv">$usuario</span><span class="s2"> creado en el grupo </span><span class="nv">$grupo</span><span class="s2"> con contraseña por defecto &#39;cambiame&#39;.&quot;</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-borrar&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>g<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">grupos</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>Borro<span class="w"> </span>usuarios<span class="w"> </span>del<span class="w"> </span>grupo<span class="w"> </span><span class="nv">$g</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span>u<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>u<span class="nv">$g</span><span class="k">)</span><span class="p">;</span>
<span class="w">      </span><span class="k">do</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>Borramos<span class="w"> </span>el<span class="w"> </span>usuario<span class="w"> </span><span class="nv">$u</span>
<span class="w">        </span>userdel<span class="w"> </span>-r<span class="w"> </span><span class="nv">$u</span>
<span class="w">      </span><span class="k">done</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-listar&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>g<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="si">${</span><span class="nv">grupos</span><span class="p">[@]</span><span class="si">}</span><span class="p">;</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>Usuarios<span class="w"> </span>del<span class="w"> </span>grupo<span class="w"> </span><span class="nv">$g</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span>u<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>u<span class="nv">$g</span><span class="k">)</span><span class="p">;</span>
<span class="w">      </span><span class="k">do</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$u</span>
<span class="w">      </span><span class="k">done</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span><span class="w">  </span>
<span class="k">else</span>
<span class="w">  </span>show_help
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-22-22-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-22-22-0" name="22-0" role="tab" tabindex="0">usuarios.sh</button><button aria-controls="panel-22-22-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-22-22-1" name="22-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-22-22-0" class="sphinx-tabs-panel" id="panel-22-22-0" name="22-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>usuarios.sh</strong>, utiliza para ello un clon enlazado de la «MV Ubuntu Server 24.04»</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./usuarios.sh<span class="w"> </span>-help
<span class="w">  </span>usuarios.sh<span class="w"> </span>-addgroup<span class="w"> </span>&lt;grupo&gt;<span class="w">         </span>:<span class="w"> </span>Crea<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>no<span class="w"> </span>existe
<span class="w">  </span>usuarios.sh<span class="w"> </span>-delgroup<span class="w"> </span>&lt;grupo&gt;<span class="w">         </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>existe
<span class="w">  </span>usuarios.sh<span class="w"> </span>-adduser<span class="w"> </span>&lt;usuario&gt;<span class="w"> </span><span class="o">[</span>grupo<span class="o">]</span>:<span class="w"> </span>Crea<span class="w"> </span>un<span class="w"> </span>usuario<span class="w"> </span>en<span class="w"> </span>el<span class="w"> </span>grupo<span class="w"> </span>especificado
<span class="w">                                        </span>:<span class="w"> </span>Si<span class="w"> </span>el<span class="w"> </span>grupo<span class="w"> </span>no<span class="w"> </span>existe<span class="w"> </span>lo<span class="w"> </span>crea<span class="w"> </span>primero
<span class="w">                                        </span>:<span class="w"> </span>Si<span class="w"> </span>no<span class="w"> </span>damos<span class="w"> </span>grupo<span class="w"> </span>usa<span class="w"> </span>por<span class="w"> </span>defecto<span class="w"> </span>el<span class="w"> </span>grupo<span class="w"> </span>usuario1
<span class="w">  </span>usuarios.sh<span class="w"> </span>-deluser<span class="w"> </span>&lt;usuario&gt;<span class="w">        </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>usuario<span class="w"> </span>si<span class="w"> </span>existe
<span class="w">  </span>usuarios.sh<span class="w"> </span>-lista<span class="w">                    </span>:<span class="w"> </span>Lista<span class="w"> </span>todos<span class="w"> </span>los<span class="w"> </span>grupos<span class="w"> </span>y<span class="w"> </span>sus<span class="w"> </span>usuarios

En<span class="w"> </span>el<span class="w"> </span>caso<span class="w"> </span>de<span class="w"> </span>ejecutar<span class="w"> </span>./usuarios.sh<span class="w"> </span>sin<span class="w"> </span>argumentos<span class="w"> </span>obtendremos<span class="w"> </span>el<span class="w"> </span>mensaje<span class="w"> </span>de<span class="w"> </span>ayuda.
</pre></div>
</div>
<p>Chequea tu script con las siguientes características:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>usuarios.sh
<span class="k">for</span><span class="w"> </span>g<span class="w"> </span><span class="k">in</span><span class="w"> </span>GA<span class="w"> </span>GB<span class="w"> </span>GC<span class="w"> </span>GD
<span class="k">do</span>
<span class="w">  </span>./usuarios.sh<span class="w"> </span>-addgroup<span class="w"> </span><span class="nv">$g</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span>u<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">01</span><span class="w"> </span><span class="m">02</span><span class="w"> </span><span class="m">03</span><span class="w"> </span><span class="m">04</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">    </span><span class="nv">usuario</span><span class="o">=</span>usuario_<span class="si">${</span><span class="nv">g</span><span class="si">}</span>_<span class="si">${</span><span class="nv">u</span><span class="si">}</span>
<span class="w">    </span>./usuarios.sh<span class="w"> </span>-adduser<span class="w"> </span><span class="si">${</span><span class="nv">usuario</span><span class="si">}</span><span class="w"> </span><span class="si">${</span><span class="nv">g</span><span class="si">}</span>
<span class="w">  </span><span class="k">done</span>
<span class="k">done</span>
./usuarios.sh<span class="w"> </span>-lista

./usuarios.sh<span class="w"> </span>-help
El<span class="w"> </span>script<span class="w"> </span>muestra<span class="w"> </span>una<span class="w"> </span>ayuda<span class="w"> </span>con<span class="w"> </span>las<span class="w"> </span>opciones<span class="w"> </span>que<span class="w"> </span>puede<span class="w"> </span>tiene
</pre></div>
</div>
</div><div aria-labelledby="tab-22-22-1" class="sphinx-tabs-panel" hidden="true" id="panel-22-22-1" name="22-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Uso del script:&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;./usuarios.sh -addgroup &lt;grupo&gt;         : Crea un grupo si no existe&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;./usuarios.sh -delgroup &lt;grupo&gt;         : Elimina un grupo si existe&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;./usuarios.sh -adduser &lt;usuario&gt; [grupo]: Crea un usuario en el grupo especificado (o en uno con su mismo nombre)&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;./usuarios.sh -deluser &lt;usuario&gt;        : Elimina un usuario si existe&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;./usuarios.sh -lista                    : Lista todos los grupos y sus usuarios&quot;</span>
<span class="o">}</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-addgroup&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$2</span><span class="w"> </span>/etc/group<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No se crea el grupo, el grupo </span><span class="nv">$2</span><span class="s2"> existe.&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Creamos el grupo </span><span class="nv">$2</span><span class="s2">&quot;</span>
<span class="w">      </span>groupadd<span class="w"> </span><span class="nv">$2</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-delgroup&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>groupdel<span class="w"> </span><span class="nv">$2</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-adduser&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">usuario</span><span class="o">=</span><span class="nv">$2</span>
<span class="w">    </span><span class="nv">grupo</span><span class="o">=</span><span class="si">${</span><span class="nv">3</span><span class="k">:-</span><span class="nv">$usuario</span><span class="si">}</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;creamos el </span><span class="nv">$usuario</span><span class="s2"> en </span><span class="nv">$grupo</span><span class="s2">&quot;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No se crea el usuario, el usuario </span><span class="nv">$usuario</span><span class="s2"> ya existe.&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>/etc/group<span class="k">)</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span>groupadd<span class="w"> </span><span class="nv">$grupo</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Creamos el grupo </span><span class="nv">$grupo</span><span class="s2">&quot;</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">      </span>useradd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>-d<span class="w"> </span>/home/<span class="nv">$usuario</span><span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span><span class="w"> </span>mkpasswd<span class="w"> </span>-m<span class="w"> </span>sha-512<span class="w"> </span>-s<span class="w"> </span>cambiame<span class="k">)</span><span class="w"> </span><span class="nv">$usuario</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Usuario </span><span class="nv">$usuario</span><span class="s2"> creado en el grupo </span><span class="nv">$grupo</span><span class="s2"> con contraseña por defecto &#39;cambiame&#39;.&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-deluser&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$2</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span>userdel<span class="w"> </span>-r<span class="w"> </span><span class="nv">$2</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Usuario </span><span class="nv">$2</span><span class="s2"> eliminado.&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No se borra el usuario, el usuario </span><span class="nv">$2</span><span class="s2"> no existe.&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-lista&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="c1">#solo listamos los grupos que tienen usuarios</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>g<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="w"> </span>/etc/group<span class="k">)</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>members<span class="w"> </span><span class="nv">$g</span><span class="w"> </span><span class="k">)</span><span class="w"> </span>!<span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-----<span class="w"> </span><span class="nv">$g</span>------
<span class="w">        </span>members<span class="w"> </span><span class="nv">$g</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span>

<span class="k">else</span>
<span class="w">  </span>show_help
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-23-23-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-23-23-0" name="23-0" role="tab" tabindex="0">rsync_usuarios.sh</button><button aria-controls="panel-23-23-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-23-23-1" name="23-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-23-23-0" class="sphinx-tabs-panel" id="panel-23-23-0" name="23-0" role="tabpanel" tabindex="0"><p>Crea tres máquinas virtuales con Ubuntu Server:</p>
<ul class="simple">
<li><p>Servidor principal llamado compute-0-0</p></li>
<li><p>Clientes compute-0-1 y compute-0-2.</p></li>
</ul>
<p>Permite la conexión desde compute-0-0 al usuario root de compute-0-1 y compute-0-2 sin utilizar contraseña, mediante la exportación de claves SSH públicas.</p>
<p>Escribe un script para clonar usuarios, el script deberá copiar los usuarios del sistema desde compute-0-0 a compute-0-1 y compute-0-2 utilizando el comando rsync para transferir los siguientes archivos:</p>
<ul class="simple">
<li><p>/etc/passwd</p></li>
<li><p>/etc/shadow</p></li>
<li><p>/etc/group</p></li>
</ul>
<p>El script debe comprobar que los directorios /home/usuario existen en los clientes. Si no existen, deberá crearlos y configurar el acceso SSH de los usuarios.</p>
<p>En los clientes, el script creará el directorio /home/usuario/.ssh para cada usuario (si no existe) y copiará su clave pública desde el servidor compute-0-0, de modo que los usuarios puedan iniciar sesión por SSH sin contraseña.»</p>
</div><div aria-labelledby="tab-23-23-1" class="sphinx-tabs-panel" hidden="true" id="panel-23-23-1" name="23-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">clientes</span><span class="o">=</span><span class="s1">&#39;compute-0-1 compute-0-2&#39;</span>

<span class="k">for</span><span class="w"> </span>cpu<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$clientes</span>
<span class="k">do</span>
<span class="w">  </span>rsync<span class="w">  </span>-av<span class="w"> </span>--delete<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="nv">$cpu</span>:/etc/passwd
<span class="w">  </span>rsync<span class="w">  </span>-av<span class="w"> </span>--delete<span class="w"> </span>/etc/shadow<span class="w"> </span><span class="nv">$cpu</span>:/etc/shadow
<span class="w">  </span>rsync<span class="w">  </span>-av<span class="w"> </span>--delete<span class="w"> </span>/etc/group<span class="w"> </span><span class="nv">$cpu</span>:/etc/group
<span class="k">done</span>


<span class="nv">u</span><span class="o">=</span>usuario_GD_04
<span class="nv">g</span><span class="o">=</span>GD

<span class="k">for</span><span class="w"> </span>u<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>usuari<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f1<span class="k">)</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">g</span><span class="o">=</span><span class="k">$(</span>groups<span class="w"> </span><span class="nv">$u</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f2<span class="k">)</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-d<span class="w"> </span>/home/<span class="nv">$u</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>no<span class="w"> </span>creamos<span class="w"> </span>la<span class="w"> </span>carpeta<span class="w"> </span>/home/<span class="nv">$u</span><span class="w"> </span>ya<span class="w"> </span>que<span class="w"> </span>existe
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span>cp<span class="w"> </span>-r<span class="w"> </span>home_usuario_server<span class="w">  </span>/home/<span class="nv">$u</span>
<span class="w">    </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/usuario_X/</span><span class="nv">$u</span><span class="s2">/&quot;</span><span class="w"> </span>/home/<span class="nv">$u</span>/.ssh/id_ed25519.pub
<span class="w">    </span>chown<span class="w"> </span>-R<span class="w"> </span><span class="nv">$u</span>:<span class="nv">$g</span><span class="w"> </span>/home/<span class="nv">$u</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>cpu<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nv">$clientes</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span>cp<span class="w"> </span>-r<span class="w"> </span>home_usuario_cliente<span class="w"> </span><span class="nv">$u</span>
<span class="w">      </span>sed<span class="w"> </span>-i<span class="w"> </span><span class="s2">&quot;s/usuario_X/</span><span class="nv">$u</span><span class="s2">/&quot;</span><span class="w"> </span><span class="nv">$u</span>/.ssh/authorized_keys
<span class="w">      </span>scp<span class="w"> </span>-r<span class="w"> </span><span class="nv">$u</span><span class="w"> </span><span class="nv">$cpu</span>:/home/
<span class="w">      </span>ssh<span class="w"> </span><span class="nv">$cpu</span><span class="w"> </span>chown<span class="w">  </span>-R<span class="w"> </span><span class="nv">$u</span>:<span class="nv">$g</span><span class="w"> </span>/home/<span class="nv">$u</span>
<span class="w">      </span>rm<span class="w"> </span>-fr<span class="w"> </span><span class="nv">$u</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>

<span class="c1">#rm -fr /home/usuario* ; ssh compute-0-1 rm -fr  /home/usu* ;  ssh compute-0-2 rm</span>
</pre></div>
</div>
<p>Necesitamos los siguientes archivos auxiliares</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>root@compute-0-0:~#<span class="w"> </span>ls<span class="w"> </span>-la<span class="w">  </span>home_usuario_cliente/
total<span class="w"> </span><span class="m">32</span>
drwxr-xr-x<span class="w"> </span><span class="m">4</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.
drwx------<span class="w"> </span><span class="m">6</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>jun<span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">09</span>:55<span class="w"> </span>..
-rw-------<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">   </span><span class="m">68</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.bash_history
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">  </span><span class="m">220</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.bash_logout
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">3771</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.bashrc
drwx------<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.cache
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">  </span><span class="m">807</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:05<span class="w"> </span>.profile
drwxr-xr-x<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:15<span class="w"> </span>.ssh
root@compute-0-0:~#<span class="w"> </span>ls<span class="w"> </span>-la<span class="w">  </span>home_usuario_server/
total<span class="w"> </span><span class="m">28</span>
drwxr-x---<span class="w"> </span><span class="m">3</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:04<span class="w"> </span>.
drwx------<span class="w"> </span><span class="m">6</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>jun<span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">09</span>:55<span class="w"> </span>..
-rw-------<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">  </span><span class="m">163</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:04<span class="w"> </span>.bash_history
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">  </span><span class="m">220</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:04<span class="w"> </span>.bash_logout
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">3771</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:04<span class="w"> </span>.bashrc
-rw-r--r--<span class="w"> </span><span class="m">1</span><span class="w"> </span>root<span class="w"> </span>root<span class="w">  </span><span class="m">807</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:04<span class="w"> </span>.profile
drwx------<span class="w"> </span><span class="m">2</span><span class="w"> </span>root<span class="w"> </span>root<span class="w"> </span><span class="m">4096</span><span class="w"> </span>may<span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">08</span>:11<span class="w"> </span>.ssh
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-24-24-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-24-24-0" name="24-0" role="tab" tabindex="0">crear y borrar desde una lista</button><button aria-controls="panel-24-24-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-24-24-1" name="24-1" role="tab" tabindex="-1">crear_usuarios_lista.sh</button><button aria-controls="panel-24-24-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-24-24-2" name="24-2" role="tab" tabindex="-1">borrar_usuarios_lista.sh</button><button aria-controls="panel-24-24-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-24-24-3" name="24-3" role="tab" tabindex="-1">crear_usuarios_grupo_lista.sh</button><button aria-controls="panel-24-24-4" aria-selected="false" class="sphinx-tabs-tab" id="tab-24-24-4" name="24-4" role="tab" tabindex="-1">borrar_usuarios_grupo_lista.sh</button></div><div aria-labelledby="tab-24-24-0" class="sphinx-tabs-panel" id="panel-24-24-0" name="24-0" role="tabpanel" tabindex="0"><p>Genera la siguiente lista de usuarios en el archivo <strong>lista.dat</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="o">((</span><span class="nv">i</span><span class="o">=</span><span class="m">0</span><span class="p">;</span>i&lt;<span class="m">40</span><span class="p">;</span>i++<span class="o">))</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">R</span><span class="o">=</span><span class="nv">$RANDOM</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>tunombre_<span class="nv">$R</span><span class="w"> </span>G<span class="k">$((</span><span class="nv">$R</span><span class="o">%</span><span class="m">4</span><span class="k">))</span>
<span class="k">done</span><span class="w"> </span>&gt;<span class="w"> </span>lista.dat
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Crea un script llamado <strong>crear_usuarios_lista.sh</strong> que genere por defecto los usuarios que encuentra en el archivo <strong>lista.dat</strong>, con la contraseña <code class="docutils literal notranslate"><span class="pre">cambiame</span></code>, haz que si recibe el nombre de otro archivo como lista lo utilice. En el caso de que el grupo no exista haz que lo cree en el sistema</p></li>
<li><p>Crea otro script llamado <strong>borrar_usuarios_lista.sh</strong> que borre los usuarios que aparecen en el archivo <strong>lista.dat</strong>, haz que utilice este archivo por defecto en el caso de no recibir ningun archivo.</p></li>
<li><p>Crea otro script llamdo <strong>crear_usuarios_grupo_lista.sh</strong> que lea solo la primera columna de un archivo llamado <strong>nombre_grupo.dat</strong>, creará todos los usuarios dentro del grupo llamado <strong>nombre_grupo</strong>, en el caso de que no exista creara primero el grupo.</p></li>
<li><p>Crea otro script llamdo <strong>borrar_usuarios_grupo_lista.sh</strong> que lea solo la primera columna de un archivo llamado <strong>nombre_grupo.dat</strong>, borrará todos los usuarios que encuentre en la lista, al final y sólo en el caso de que el grupo se haya quedado bacio se borrará tambien el grupo.</p></li>
</ol>
</div><div aria-labelledby="tab-24-24-1" class="sphinx-tabs-panel" hidden="true" id="panel-24-24-1" name="24-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#Vamos a crear los usuarios que aparecen en la lista.dat</span>
<span class="c1">#$cat listda.dat</span>
<span class="c1"># usuario1 Grupo1</span>
<span class="c1"># usuario2 Grupo2</span>
<span class="c1"># usuario3 Grupo1</span>

<span class="nv">archivo</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">lista</span><span class="p">.dat</span><span class="si">}</span>

<span class="k">for</span><span class="w"> </span>usuario<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="k">)</span>
<span class="k">do</span>
<span class="w">  </span><span class="nv">grupo</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f2<span class="k">)</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se crea el usuario, el usuario </span><span class="nv">$usuario</span><span class="s2"> ya existe. \033[0m&quot;</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>/etc/group<span class="k">)</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span>groupadd<span class="w"> </span><span class="nv">$grupo</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el grupo </span><span class="nv">$grupo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">    </span>useradd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>-d<span class="w"> </span>/home/<span class="nv">$usuario</span><span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span><span class="w"> </span>mkpasswd<span class="w"> </span>-m<span class="w"> </span>sha-512<span class="w"> </span>-s<span class="w"> </span>cambiame<span class="k">)</span><span class="w"> </span><span class="nv">$usuario</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el usuario </span><span class="nv">$usuario</span><span class="s2"> en el grupo </span><span class="nv">$grupo</span><span class="s2"> con contraseña por defecto &#39;cambiame&#39;.\033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-24-24-2" class="sphinx-tabs-panel" hidden="true" id="panel-24-24-2" name="24-2" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#Vamos a crear los usuarios que aparecen en la lista.dat</span>

<span class="nv">archivo</span><span class="o">=</span><span class="si">${</span><span class="nv">1</span><span class="k">:-</span><span class="nv">lista</span><span class="p">.dat</span><span class="si">}</span>


<span class="k">for</span><span class="w"> </span>usuario<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="k">)</span>
<span class="k">do</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Borramos el </span><span class="nv">$usuario</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span>userdel<span class="w"> </span>-r<span class="w"> </span><span class="nv">$usuario</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El usuario </span><span class="nv">$usuario</span><span class="s2"> no existe \033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">done</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-24-24-3" class="sphinx-tabs-panel" hidden="true" id="panel-24-24-3" name="24-3" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#Vamos a crear los usuarios que aparecen en el archvio grupo.dat</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w">  </span><span class="s2">&quot;\033[31m El primer argumento es el archivo con el nombre del grupo.dat \033[0m&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">$1</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">archivo</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[33m Leemos el archivo </span><span class="nv">$archivo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="nv">grupo</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/.dat//&#39;</span><span class="k">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>usuario<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="k">)</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se crea el usuario, el usuario </span><span class="nv">$usuario</span><span class="s2"> ya existe.\033[0m&quot;</span>
<span class="w">      </span><span class="k">else</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>/etc/group<span class="k">)</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">        </span><span class="k">then</span>
<span class="w">          </span>groupadd<span class="w"> </span><span class="nv">$grupo</span>
<span class="w">          </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el grupo </span><span class="nv">$grupo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">        </span><span class="k">fi</span>
<span class="w">        </span><span class="nb">echo</span><span class="w">  </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el usuario </span><span class="nv">$usuario</span><span class="s2"> en el grupo </span><span class="nv">$grupo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">        </span>useradd<span class="w"> </span>-g<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>-d<span class="w"> </span>/home/<span class="nv">$usuario</span><span class="w"> </span>-m<span class="w"> </span>-s<span class="w"> </span>/bin/bash<span class="w"> </span>-p<span class="w"> </span><span class="k">$(</span><span class="w"> </span>mkpasswd<span class="w"> </span>-m<span class="w"> </span>sha-512<span class="w"> </span>-s<span class="w"> </span>cambiame<span class="k">)</span><span class="w"> </span><span class="nv">$usuario</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Usuario </span><span class="nv">$usuario</span><span class="s2"> creado en el grupo </span><span class="nv">$grupo</span><span class="s2"> con contraseña por defecto &#39;cambiame&#39;.\033[0m&quot;</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El archivo </span><span class="nv">$1</span><span class="s2"> no existe \033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-24-24-4" class="sphinx-tabs-panel" hidden="true" id="panel-24-24-4" name="24-4" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w">  </span><span class="s2">&quot;\033[31m El primer argumento es el archivo con el nombre del grupo.dat \033[0m&quot;</span>
<span class="k">else</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="nb">test</span><span class="w"> </span>-e<span class="w"> </span><span class="nv">$1</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="nv">archivo</span><span class="o">=</span><span class="nv">$1</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[33m Leemos el archivo </span><span class="nv">$archivo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="nv">grupo</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;s/.dat//&#39;</span><span class="k">)</span>
<span class="w">    </span><span class="nv">idg</span><span class="o">=</span><span class="k">$(</span>grep<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span>/etc/group<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f3<span class="k">)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span>usuario<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>cat<span class="w"> </span><span class="nv">$archivo</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f1<span class="w"> </span><span class="k">)</span>
<span class="w">    </span><span class="k">do</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>grep<span class="w"> </span>-c<span class="w"> </span><span class="nv">$usuario</span><span class="w"> </span>/etc/passwd<span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span>userdel<span class="w"> </span>-r<span class="w"> </span><span class="nv">$usuario</span>
<span class="w">        </span><span class="nb">echo</span><span class="w">  </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Borramos el usuario </span><span class="nv">$usuario</span><span class="s2"> </span><span class="nv">$grupo</span><span class="s2"> \033[0m&quot;</span>
<span class="w">      </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se borra el usuario, el usuario </span><span class="nv">$usuario</span><span class="s2"> no existe.\033[0m&quot;</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">done</span>
<span class="w">    </span><span class="nv">n_usuarios_grupo</span><span class="o">=</span><span class="k">$(</span>cat<span class="w"> </span>/etc/passwd<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f4<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="nv">$idg</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span>-s<span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39; &#39;</span><span class="w"> </span>-f2<span class="k">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$n_usuarios_grupo</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w">  </span><span class="s2">&quot;\033[34m Borramos el </span><span class="nv">$grupo</span><span class="s2"> ya que no tiene usuarios \033[0m&quot;</span>
<span class="w">      </span>groupdel<span class="w"> </span><span class="nv">$grupo</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w">  </span><span class="s2">&quot;\033[31m No se borra el  </span><span class="nv">$grupo</span><span class="s2"> ya que tiene </span><span class="nv">$n_usuarios_grupo</span><span class="s2">  usuarios \033[0m&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m El archivo </span><span class="nv">$1</span><span class="s2"> no existe \033[0m&quot;</span>
<span class="w">  </span><span class="k">fi</span>
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
</section>
<section id="gestion-de-usuarios-ldap">
<h2>Gestión de usuarios LDAP<a class="headerlink" href="#gestion-de-usuarios-ldap" title="Link to this heading">#</a></h2>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-25-25-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-25-25-0" name="25-0" role="tab" tabindex="0">usuarios_ldap.sh</button><button aria-controls="panel-25-25-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-25-25-1" name="25-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-25-25-0" class="sphinx-tabs-panel" id="panel-25-25-0" name="25-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>usuarios_ldap.sh</strong>, utiliza para ello un clon enlazado de la “MV Ubuntu Server 24.04” con un ldap configurado <a class="reference external" href="https://dgtrabada.github.io/so/GNULinux/13_ldap.html#instalacion-del-servidor-ldap">aqui</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Uso<span class="w"> </span>del<span class="w"> </span>script:
./usuarios_ldap.sh<span class="w"> </span>-addgroup<span class="w"> </span>&lt;grupo&gt;<span class="w">         </span>:<span class="w"> </span>Crea<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>no<span class="w"> </span>existe
./usuarios_ldap.sh<span class="w"> </span>-delgroup<span class="w"> </span>&lt;grupo&gt;<span class="w">         </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>existe
./usuarios_ldap.sh<span class="w"> </span>-lsgroup<span class="w">                  </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>existe
./usuarios_ldap.sh<span class="w"> </span>-adduser<span class="w"> </span>&lt;usuario&gt;<span class="w"> </span><span class="o">[</span>grupo<span class="o">]</span>:<span class="w"> </span>Crea<span class="w"> </span>un<span class="w"> </span>usuario<span class="w"> </span>en<span class="w"> </span>el<span class="w"> </span>grupo<span class="w"> </span>especificado
./usuarios_ldap.sh<span class="w"> </span>-deluser<span class="w"> </span>&lt;usuario&gt;<span class="w">        </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>usuario<span class="w"> </span>si<span class="w"> </span>existe
./usuarios_ldap.sh<span class="w"> </span>-lista<span class="w">                    </span>:<span class="w"> </span>Lista<span class="w"> </span>todos<span class="w"> </span>los<span class="w"> </span>grupos<span class="w"> </span>y<span class="w"> </span>sus<span class="w"> </span>usuarios
./usuarios_ldap.sh<span class="w"> </span>-lsuser<span class="w">                   </span>:<span class="w"> </span>Elimina<span class="w"> </span>un<span class="w"> </span>grupo<span class="w"> </span>si<span class="w"> </span>existe
</pre></div>
</div>
</div><div aria-labelledby="tab-25-25-1" class="sphinx-tabs-panel" hidden="true" id="panel-25-25-1" name="25-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nv">LDAP</span><span class="o">=</span><span class="s2">&quot;dc=ldap,dc=tunombre,dc=local&quot;</span>
<span class="nv">LDAPadmin</span><span class="o">=</span><span class="s2">&quot;cn=admin,</span><span class="nv">$LDAP</span><span class="s2">&quot;</span>
<span class="nv">password</span><span class="o">=</span>alumno
<span class="nv">passwd_defecto_usuario</span><span class="o">=</span>cambiame

<span class="k">function</span><span class="w"> </span>crear_grupo<span class="o">(){</span>
<span class="nv">NAMEG</span><span class="o">=</span><span class="nv">$1</span><span class="w">       </span><span class="c1">#GA</span>
<span class="nv">NUMBERGID</span><span class="o">=</span><span class="nv">$2</span><span class="w">   </span><span class="c1">#501</span>

cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; grupo.ldif</span>
<span class="s">dn: cn=${NAMEG},ou=grupos,$LDAP</span>
<span class="s">objectClass: posixGroup</span>
<span class="s">cn: ${NAMEG}</span>
<span class="s">gidNumber: ${NUMBERGID}</span>
<span class="s">EOF</span>

ldapadd<span class="w"> </span>-x<span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-f<span class="w"> </span>grupo.ldif
rm<span class="w"> </span>-fr<span class="w"> </span>grupo.ldif
<span class="o">}</span>

<span class="k">function</span><span class="w"> </span>crear_usuario<span class="o">(){</span>
<span class="nv">NAME</span><span class="o">=</span><span class="nv">$1</span><span class="w">      </span><span class="c1">#tunombre1</span>
<span class="nv">NUMBERID</span><span class="o">=</span><span class="nv">$2</span><span class="w">  </span><span class="c1">#1001</span>
<span class="nv">NUMBERGID</span><span class="o">=</span><span class="k">$(</span><span class="w"> </span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="nv">cn</span><span class="o">=</span><span class="nv">$3</span><span class="w"> </span>gidNumber<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w">  </span>gid<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="k">)</span>

cat<span class="w"> </span><span class="s">&lt;&lt; EOF &gt; usuarios.ldif</span>
<span class="s">dn: uid=${NAME},ou=usuarios,$LDAP</span>
<span class="s">objectClass: inetOrgPerson</span>
<span class="s">objectClass: posixAccount</span>
<span class="s">objectClass: shadowAccount</span>
<span class="s">uid: ${NAME}</span>
<span class="s">cn: ${NAME}</span>
<span class="s">sn: ${NAME}</span>
<span class="s">gidNumber: ${NUMBERGID}</span>
<span class="s">uidNumber: ${NUMBERID}</span>
<span class="s">userPassword: $passwd_defecto_usuario</span>
<span class="s">homeDirectory: /home/$NAME</span>
<span class="s">loginShell: /bin/bash</span>
<span class="s">EOF</span>

ldapadd<span class="w"> </span>-x<span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-f<span class="w"> </span>usuarios.ldif
<span class="c1">#rm -fr usuarios.ldif</span>
<span class="o">}</span>

<span class="k">function</span><span class="w"> </span>show_help<span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Uso del script:\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -addgroup &lt;grupo&gt;         : Crea un grupo si no existe\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -delgroup &lt;grupo&gt;         : Elimina un grupo si existe\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -lsgroup                  : Elimina un grupo si existe\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -adduser &lt;usuario&gt; [grupo]: Crea un usuario en el grupo especificado \033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -deluser &lt;usuario&gt;        : Elimina un usuario si existe\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -lista                    : Lista todos los grupos y sus usuarios\033[0m&quot;</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m ./usuarios_ldap.sh -lsuser                  : Elimina un grupo si existe\033[0m&quot;</span>
<span class="o">}</span>


<span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$#</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="k">then</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-addgroup&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="nv">cn</span><span class="o">=</span><span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;ldap&#39;</span><span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se crea el grupo, el grupo </span><span class="nv">$2</span><span class="s2"> existe. \033[0m&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el grupo </span><span class="nv">$2</span><span class="s2"> \033[0m&quot;</span>
<span class="w">      </span><span class="c1">#tomamos el ultimo gidNumbrer:</span>
<span class="w">      </span><span class="nv">gidN</span><span class="o">=</span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>gidNumber<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$gidN</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="c1">#-z indica que la variable esta vacía</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nv">gidN</span><span class="o">=</span><span class="m">500</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">      </span><span class="nv">gidN</span><span class="o">=</span><span class="k">$((</span><span class="nv">gidN</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">      </span>crear_grupo<span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="nv">$gidN</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>


<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-delgroup&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="nv">cn</span><span class="o">=</span><span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;ldap&#39;</span><span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span>ldapdelete<span class="w"> </span>-x<span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span><span class="s2">&quot;cn=</span><span class="nv">$2</span><span class="s2">,ou=grupos,</span><span class="nv">$LDAP</span><span class="s2">&quot;</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Borramos el grupo </span><span class="nv">$2</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se borra el grupo, el grupo </span><span class="nv">$2</span><span class="s2"> no existe. \033[0m&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-lsgroup&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="s2">&quot;(objectClass=posixGroup)&quot;</span><span class="w"> </span>cn<span class="w"> </span>gidNumber
<span class="w">  </span><span class="k">fi</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-adduser&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="nv">cn</span><span class="o">=</span><span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;ldap&#39;</span><span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se crea el usuario, </span><span class="nv">$2</span><span class="s2"> existe. \033[0m&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="c1">#tomamos el ultimo gidNumbrer:</span>
<span class="w">      </span><span class="nv">uidN</span><span class="o">=</span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>uidNumber<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-d<span class="s1">&#39;:&#39;</span><span class="w"> </span>-f2<span class="w"> </span><span class="p">|</span><span class="w"> </span>tail<span class="w"> </span>-1<span class="k">)</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$uidN</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="c1">#-z indica que la variable esta vacía</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nv">uidN</span><span class="o">=</span><span class="m">1000</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">      </span><span class="nv">uidN</span><span class="o">=</span><span class="k">$((</span><span class="nv">uidN</span><span class="o">+</span><span class="m">1</span><span class="k">))</span>
<span class="w">      </span><span class="nv">grupo</span><span class="o">=</span><span class="nv">$3</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-z<span class="w"> </span><span class="nv">$grupo</span><span class="w"> </span><span class="o">]</span>
<span class="w">      </span><span class="k">then</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se crea el usuario, necesitamos un grupo. \033[0m&quot;</span>
<span class="w">      </span><span class="k">else</span>
<span class="w">        </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Creamos el usuario </span><span class="nv">$2</span><span class="s2"> \033[0m&quot;</span>
<span class="w">        </span>crear_usuario<span class="w"> </span><span class="nv">$2</span><span class="w"> </span><span class="nv">$uidN</span><span class="w"> </span><span class="nv">$grupo</span>
<span class="w">      </span><span class="k">fi</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>


<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-deluser&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="k">$(</span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="nv">uid</span><span class="o">=</span><span class="nv">$2</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;ldap&#39;</span><span class="k">)</span><span class="w"> </span>-gt<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]]</span>
<span class="w">    </span><span class="k">then</span>
<span class="w">      </span>ldapdelete<span class="w"> </span>-x<span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span><span class="s2">&quot;uid=</span><span class="nv">$2</span><span class="s2">,ou=usuarios,</span><span class="nv">$LDAP</span><span class="s2">&quot;</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[34m Borramos el usuario </span><span class="nv">$2</span><span class="s2"> \033[0m&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">      </span><span class="nb">echo</span><span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;\033[31m No se borra el usuario, el usuario </span><span class="nv">$2</span><span class="s2"> no existe. \033[0m&quot;</span>
<span class="w">    </span><span class="k">fi</span>
<span class="w">  </span><span class="k">fi</span>



<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="o">[[</span><span class="w"> </span><span class="nv">$1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&quot;-lsuser&quot;</span><span class="w"> </span><span class="o">]]</span>
<span class="w">  </span><span class="k">then</span>
<span class="w">    </span>ldapsearch<span class="w"> </span>-xLLL<span class="w"> </span>-D<span class="w"> </span><span class="nv">$LDAPadmin</span><span class="w"> </span>-w<span class="w"> </span><span class="nv">$password</span><span class="w"> </span>-b<span class="w"> </span><span class="nv">$LDAP</span><span class="w"> </span><span class="s2">&quot;(objectClass=posixAccount)&quot;</span><span class="w"> </span>cn<span class="w"> </span>uidNumber
<span class="w">  </span><span class="k">fi</span>

<span class="k">else</span>
<span class="w">  </span>show_help
<span class="k">fi</span>
</pre></div>
</div>
</div></div>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-26-26-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-26-26-0" name="26-0" role="tab" tabindex="0">usuarios_lista_ldap.sh</button><button aria-controls="panel-26-26-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-26-26-1" name="26-1" role="tab" tabindex="-1">Solución</button></div><div aria-labelledby="tab-26-26-0" class="sphinx-tabs-panel" id="panel-26-26-0" name="26-0" role="tabpanel" tabindex="0"><p>Crea un script llamado <strong>usuarios_lista_ldap.sh</strong>, haz que todos los usuarios se lean de un archivo llamado grupo.dat. Haz que todos los usuarios pertenezcan al grupo con el mismo nombre que el archivo sin la extensión .dat. En el caso de que no exista el grupo haz que se cree.</p>
<p>En el archivo grupo.dat, hay una lista de emails, haz que se creer el usuario correspondiente al email, es decir <a class="reference external" href="mailto:usuario1&#37;&#52;&#48;gmail&#46;com">usuario1<span>&#64;</span>gmail<span>&#46;</span>com</a> creara el usuario usuario1. En el caso de -borrar borrara todos los usuarios del archivo, finalmente si no quedan usuarios en el grupo borra el grupo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>./usuarios_lista_ldap.sh<span class="w"> </span>-help
./usuarios_lista_ldap.sh<span class="w"> </span>-crear<span class="w"> </span>&lt;archivo.dat&gt;
./usuarios_lista_ldap.sh<span class="w"> </span>-borrar<span class="w"> </span>&lt;archivo.dat&gt;

<span class="c1">#head -2 grupo.dat</span>
usuario1@gmail.com
usuario2@gmail.com
</pre></div>
</div>
</div><div aria-labelledby="tab-26-26-1" class="sphinx-tabs-panel" hidden="true" id="panel-26-26-1" name="26-1" role="tabpanel" tabindex="0"><div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
</pre></div>
</div>
</div></div>
<p>#listar y borrar los usuarios de un grupo entero</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="15_shell_scripting.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">anterior</p>
        <p class="prev-next-title">Shell Scripting</p>
      </div>
    </a>
    <a class="right-next"
       href="../windows/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">siguiente</p>
        <p class="prev-next-title">Windows</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contenido
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-usuarios-locales">Gestión de usuarios locales</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gestion-de-usuarios-ldap">Gestión de usuarios LDAP</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
Por dgtrabada
</p>

  </div>
  
  <div class="footer-item">
    

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>